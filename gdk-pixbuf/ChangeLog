2000-01-22  Federico Mena Quintero  <federico@helixcode.com>

	* configure.in: Bumped version number to 0.5.0.

	* gdk-pixbuf/pixops/timescale.c (dump_array): Removed unused variable.
	(main): Return 0.

	* gdk-pixbuf/pixops/pixops.c (pixops_composite_color_nearest): Put
	parentheses around + in a shift to remove a compiler warning.
	(pixops_process): Likewise.

	Patch from Ross Golder <rossigee@bigfoot.com> to create an RPM
	specfile:

	* configure.in: Added gdk-pixbuf.spec to AC_OUTPUT.

	* Makefile.am (EXTRA_DIST): Added gdk-pixbuf.spec.in

2000-01-22  Federico Mena Quintero  <federico@helixcode.com>

	* gdk-pixbuf/gnome-canvas-pixbuf.c (PixbufPrivate): Removed the
	x_set and y_set arguments.  Now they are always on and start with
	defaults of 0.0 in units.
	(gnome_canvas_pixbuf_class_init): Likewise.
	(gnome_canvas_pixbuf_set_arg): Likewise.
	(gnome_canvas_pixbuf_get_arg): Likewise.
	(compute_viewport_affine): Likewise; always use the priv->x and
	priv->y fields.

	* doc/tmpl/gnome-canvas-pixbuf.sgml: Modified to reflect the
	removal of the x_set/y_set arguments.

2000-01-21  Federico Mena Quintero  <federico@helixcode.com>

	* gdk-pixbuf/gdk-pixbuf.c (gdk_pixbuf_ref): Return the same pixbuf
	as the input parameter.

	* gdk-pixbuf/gdk-pixbuf-animation.c (gdk_pixbuf_animation_ref):
	Return the same animation as the input parameter.

2000-01-16  Elliot Lee  <sopwith@redhat.com>

	* gdk-pixbuf/Makefile.am: Don't link against libgnomecanvaspixbuf.la

2000-01-16  Federico Mena Quintero  <federico@helixcode.com>

	* configure.in: Removed the broken --enable-canvas-pixbuf option.
	Added the stuff necessary to substitute the variables in
	gnomecanvaspixbufConf.sh.in.

	* gnomecanvaspixbufConf.sh.in: New gnome-config handler for the
	tiny gnomecanvaspixbuf library.

	* Makefile.am: Build gnomecanvaspixbufConf.sh.

	* gdk-pixbuf/Makefile.am: Create a libgnomecanvaspixbuf and only
	build it if gdk-pixbuf is being built outside of gnome-libs.

	* doc/gdk-pixbuf-sections.txt: Added gdk_pixbuf_render_pixmap_and_mask().

	* gdk-pixbuf/gdk-pixbuf-render.c
	(gdk_pixbuf_render_pixmap_and_mask): Renamed from
	gdk_pixbuf_render_pixmap().  Do not create the mask if it is not
	needed, and do not use a clipping mask when rendering the pixmap.
	Tweaked documentation a little.

	* HACKING: New file with hacking policies for the gdk-pixbuf
	module.

	* doc/Makefile.am (tmpl_sources): Added missing backslash.

	* doc/Makefile.am: Use gnomecanvaspixbuf in gnome-config when
	scanning for docstrings.

	* gdk-pixbuf/gdk-pixbuf-util.c (gdk_pixbuf_copy_area): Made sanity
	checks more stringent.  Removed "gint" abominations.  Made
	documentation consistent with the rest of the functions.

	* doc/gdk-pixbuf-sections.txt: Added gdk_pixbuf_copy_area() to the
	utilities section.

2000-01-14  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-render.c (gdk_pixbuf_render_pixmap): new
	function to let you create a gdk_pixmap from a gdk_pixbuf.

2000-01-11  Jacob Berkman  <jacob@helixcode.com>

	* gdk-pixbuf/pixops/Makefile.am (INCLUDES): added
	$LIBART_CFLAGS to $INCLUDES

2000-01-10  Elliot Lee  <sopwith@redhat.com>

	* configure.in, gdk-pixbuf/Makefile.am: Build a libcanvas_pixbuf.

	* configure.in: Define version macros. Generate
	gdk-pixbuf/gdk-pixbuf-features.h. Always INSIDE_GNOME.

	* gdk-pixbuf/Makefile.am: Add gdk-pixbuf-features.h

	* gdk-pixbuf/gdk-pixbuf.c: Add definitions of
	gdk-pixbuf-features.h declarations, plus some initialization
	stubs.

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* gdk-pixbuf/pixops/pixops.c: Fixed src_channels/dest_channels
	confusion. (Again caught by Tomas Ogren's Purify)

2000-01-07  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-xform.c (gdk_pixbuf_rotate): comment out
	debugging printing.

	* gdk-pixbuf/gdk-pixbuf-io.c: Added progressive animation loading.
	* gdk-pixbuf/gdk-pixbuf-io.h: Added progressive animation loading.
	* gdk-pixbuf/gdk-pixbuf-loader.c: Added progressive animation
	loading.
	* gdk-pixbuf/gdk-pixbuf-loader.h: Added progressive animation
	loading.
	* gdk-pixbuf/io-gif.c (image_load_increment): I think the
	ref-counting mess is finally fixed.  Added progressive animation
	loading.
	(gif_get_lzw): remove memory_leak

	* doc/tmpl/gdk-pixbuf-loader.sgml: much longer long description
	added.

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* gdk-pixbuf/pixops/pixops.c (pixops_process): Fix computation of end of run indices.

	* gdk-pixbuf/pixops/pixops.c: Fix double increments when dest_channels == 4.
	  (Pointed out by Tomas Ogren)

2000-01-05  Mark Crichton  <crichton@gimp.org>

	* gdk-pixbuf/gdk-pixbuf-loader.c (gdk_pixbuf_loader_eat_header_write):
	Return 0 if gdk_pixbuf_load_loader_module returns FALSE.

2000-01-05 Elliot Lee <sopwith@redhat.com>

	* gdk-pixbuf/pixops/Makefile.am: Link with -lm (to get 'ceil' function)

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* doc/Makefile.am doc/gdk-pixbuf-sections.txt
	  doc/gdk-pixbuf.sgml doc/tmpl/scaling.sgml:
	Added scaling functions into gtk-doc framework.

	* gdk-pixbuf/gdk-pixbuf-scale.c: Documentation fixes.

	* gdk-pixbuf/testpixbuf-scale.c (expose_cb): Simplify a bit.

	* gdk-pixbuf/pixops/pixops.c (pixops_composite_color): Return
	immediately if scale_x or scale_y is 0.

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* gdk-pixbuf/pixops/timescale.c: quick fix for initializing
	arrays in benchmark.

2000-01-05  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-io.h: Change the order of the update func
	to make it more compatible with the rest of GTK.  Added animation
	framework for progressive loading.

	* gdk-pixbuf/io-bmp.c (image_begin_load): Modified to handle new
	system.
	* gdk-pixbuf/io-ico.c (image_begin_load): ditto
	* gdk-pixbuf/io-png.c (image_begin_load): ditto
	* gdk-pixbuf/io-ras.c (image_begin_load): ditto
	* gdk-pixbuf/io-jpeg.c (image_begin_load): ditto
	* gdk-pixbuf/io-pnm.c (image_begin_load): ditto
	* gdk-pixbuf/io-tiff.c (image_begin_load): ditto
	* gdk-pixbuf/io-gif.c (image_begin_load): ditto

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* gdk-pixbuf/pixops/README: Added a README with a TODO
	and some explainations of the algorithms.

	* gdk-pixbuf/testpixbuf-scale.c: Set a background pixmap of None
	to reduce flashing when resizing.

2000-01-05  Owen Taylor  <otaylor@redhat.com>

	* gdk-pixbuf/pixops/: Directory full of pixel data scaling
	code that will eventually migrate into libart.

	* configure.in acconfig.h: Add checks for MMX compiler support

	* gdk-pixbuf/gdk-pixbuf.h gdk-pixbuf/gdk-pixbuf-scale.c:
	Nice wrapper routines for the code in pixops that operate
	on pixbufs instead of raw data.

	* gdk-pixbuf/testpixbuf-scale: Test program for scaling
	routines.

2000-01-05  Jonathan Blandford  <jrb@redhat.com>

	* doc/tmpl/animation.sgml: Documentation changes.

2000-01-01  Federico Mena Quintero  <federico@helixcode.com>

	* gdk-pixbuf/gdk-pixbuf.h (GdkPixbufAnimation): Added reference
	counting to animations.  A web browser may want to share a single
	copy of an animated GIF if it appears multiple times in a web
	page, for example.

	* gdk-pixbuf/gdk-pixbuf-animation.c: New file.  Moved the
	animation functions here.
	(gdk_pixbuf_animation_new_from_file): Prettified.  Return a NULL
	animation if the loader does not support multiframe loading and
	the single-frame load returned NULL.  Check that the filename is
	not NULL.  Updated inline documentation.
	(gdk_pixbuf_animation_ref): New function.
	(gdk_pixbuf_animation_unref): New function.
	Removed gdk_pixbuf_animation_destroy() in favor of reference
	counting.

	* gdk-pixbuf/gdk-pixbuf-io.c (gdk_pixbuf_new_from_file):
	Prettified.  Made ref_count assertion more paranoid.  Check that
	the filename is not NULL.
	(gdk_pixbuf_get_module): Use guchar * and guint for buffer and
	size, respectively.
	(gdk_pixbuf_new_from_xpm_data): Changed the "data" argument to
	const char **.

	* gdk-pixbuf/io-gif.c (image_load_animation): Create the animation
	with a reference count of 1.

	* gdk-pixbuf/Makefile.am (libgdk_pixbuf_la_SOURCES): Added
	gdk-pixbuf-animation.c.

	* doc/tmpl/animation.sgml: Populated.  It is still missing a
	description of the overlay modes.

	* doc/gdk-pixbuf-sections.txt: Added the animation section.  Moved
	the canvas item section to the end, as it will be moved later to
	gnome-libs.

	* doc/gdk-pixbuf.sgml: Added the animation section.

	* doc/Makefile.am (tmpl_sources): Added tmpl/animation.sgml.

1999-12-26  Peter Teichman  <pat@gnu.org>

	* gdk-pixbuf/Makefile.am (libpixbuf_tiff_la_LIBADD): add
	$(LIBTIFF) to libpixbuf_tiff_la_LIBADD, proxying for mmarker.
	This closes bug #4676.

1999-12-23  Havoc Pennington  <hp@pobox.com>

	* gdk-pixbuf/io-gif.c (image_load): Stuff that should have been
	set to NULL here (specifically context->animation) was not being
	set to NULL. use g_new0() to alloc the struct.

1999-12-20  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/io-gif.c: finished work to make animated gifs load
	correctly.  Progressive loading needs some work, but that all
	needs doing from the gdk-pixbuf-loader end, not here.

1999-12-17  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-io.c (gdk_pixbuf_animation_new_from_file):
	moved the file here.  It seems natural to put this function here,
	as that's where the gdk_pixbuf_new_from_file function is, but it's
	still a little convoluted.  The source files might be played with
	in a bit.

1999-12-14  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-loader.c
	(gdk_pixbuf_loader_get_animation):  Gets the animation from the
	loader.

1999-12-16  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/rendering.sgml: Added notice about initializing GdkRGB
	before using the GdkPixbuf rendering functions.  Thanks to Joe
	Shaw <joe@off.net> for pointing this out.

1999-12-13  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/gnome-canvas-pixbuf.c
	(gnome_canvas_pixbuf_class_init): Renamed arguments to
	width_in_pixels, height_in_pixels, x_in_pixels, y_in_pixels, for
	consistency with the new canvas.
	(PixbufPrivate): Do the same renaming in the structure fields, for
	consistency.

	* doc/tmpl/gnome-canvas-pixbuf.sgml: Updated for new argument names.

1999-12-12  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/Makefile.am (libgdk_pixbuf_la_LDFLAGS): Use a
	conditional to see whether to link $(GNOME_LIBS) or not.

1999-12-10  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-io.h: thinking about the new loading API.

	* gdk-pixbuf/gdk-pixbuf-drawable.c (gdk_pixbuf_get_from_drawable):
	make a warning go away.

	* gdk-pixbuf/gdk-pixbuf.h: added new prototypes for animations.

	* gdk-pixbuf/gdk-pixbuf-loader.h: added new prototypes for
	animations.

1999-12-09  Michael Zucchi  <zucchi@zedzone.mmc.com.au>

	* gdk-pixbuf/gdk-pixbuf.h: Enable gdk_pixbuf_get_from_drawable()
	api call.

	* gdk-pixbuf/gdk-pixbuf-drawable.c (gdk_pixbuf_get_from_drawable):
	Filled in body of function.
	(rgbconvert): Added GdkColormap parameter, and to all conversion
	functions also.
	(convert_real_slow): New function - should convert ANY visual/data
	format properly, but it aint fast.  Used as a fallback when an
	optimised routine wont match.
	(rgbconvert): Do very specific tests on the data format to verify
	properly if the optimised version will do, otherwise use the
	fallback function for all other data formats.

	* gdk-pixbuf/Makefile.am: Re-enabled building of
	textpixbuf-drawable.

	* gdk-pixbuf/testpixbuf-drawable.c (main): Changed to use
	gdk_pixbuf_get_from_drawable().

1999-12-08  Arjan van de Ven <arjan@fenrus.demon.nl>

	* gdk-pixbuf/gdk-pixbuf-drawable.c : Fixed the red/green/red
	bug on two occasions.
	* gdk-pixbuf/io-ras.c: Changed from the custom be32_to_cpu
	function to the generic glib one.

1999-12-08  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-drawable.c: Fix includes.
	(gdk_pixbuf_get_from_drawable): Implemented the zillion sanity
	checks and API definition.  The body needs filling in and it needs
	to do the Right Thing(tm) for pixmaps plus the given colormap and
	windows and their own colormaps.

	* gdk-pixbuf/gdk-pixbuf.h: Added prototype for
	gdk_pixbuf_get_from_drawable().  Killed gdk-pixbuf-drawable.h.

	* gdk-pixbuf/Makefile.am: Re-added the gdk-pixbuf-drawable sources.

	* doc/tmpl/from-drawables.sgml: Populated.

	* doc/gdk-pixbuf.sgml: Added the from-drawables section.

	* doc/Makefile.am (tmpl_sources): Added tmpl/from-drawables.sgml.

	* doc/gdk-pixbuf-sections.txt: Added a section for getting pixbufs
	from drawables.

1999-12-07  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/gnome-canvas-pixbuf.sgml: Added clarification about
	reference counting for GdkPixbuf structures.

1999-12-07  Martin Baulig  <martin@home-of-linux.org>

	* gdk-pixbuf/Makefile.am (testpixbuf_LDADD): Conditionally
	include $(GNOME_LIBS) here.

1999-12-05  Arjan van de Ven <arjan@fenrus.demon.nl>

	Added missing "include <string.h>" to:
	* gdk-pixbuf/io-ras.c
	* gdk-pixbuf/io-bmp.c
	* gdk-pixbuf/io-ico.c

1999-12-06  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/gdk-pixbuf-io.c (file_formats): Patch from Arjan to
	fix an initializer.

1999-12-05  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/Makefile.am (testpixbuf_LDADD): Add back
	$(GNOME_LIBS).  This must compile outside of gnome-libs.  If you
	want, send me a patch to do the conditional stuff properly.
	Otherwise, please read the GNOME Programming Guidelines,
	especially the "CVS policies" section.

1999-12-05  Jaka Mocnik  <jaka.mocnik@kiss.uni-lj.si>

	* gdk-pixbuf/Makefile.am: removed GNOME_LIBS from testpixbuf_LDADD.

1999-12-05  Arjan van de Ven <arjan@fenrus.demon.nl>

	* gdk-pixbuf/io-ico.c: Bug in palet-size
	calculation fixed

1999-12-04  Arjan van de Ven <arjan@fenrus.demon.nl>

	* gdk-pixbuf/io-bmp.c: Major cleanup, added support for
	32 bpp and 4 bpp (uncompressed) images, fixed 1bpp.

	* gdk-pixbuf/io-ras.c: Minor cleanup, ran through lclint

	* gdk-pixbuf/io-ico.c: Minor cleanup, fixed 1bpp icons,
 	ran through lclint.

	* gdk-pixbuf/gdk-pixbuf-io.c: Added detection of .CUR files
	(Windows Cursor files). These are identical to .ICO files,
	except for the signature and 2 extra fields for the hotspot.

1999-12-03  Federico Mena Quintero  <federico@redhat.com>

	* gdk-pixbuf/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_get_arg):
	Removed unused variable `item'.

1999-12-03  Jonathan Blandford  <jrb@redhat.com>

	* gdk-pixbuf/io-gif.c (gif_fill_in_lines): added a comment to
	explain this function better.

1999-12-02  Federico Mena Quintero  <federico@redhat.com>

	Source files moved from src/ to gdk-pixbuf/, to be consistent with
	other libraries.

	* doc/Makefile.am: Modified for the new source directory.

	* configure.in: Likewise.

	* Makefile.am: Likewise.

	* autogen.sh: Likewise.

	* gdk-pixbuf/Makefile.am: Likewise.

1999-12-02  Federico Mena Quintero  <federico@redhat.com>

	* src/testpixbuf.c: #include <config.h>, and fix includes.

	* src/testpixbuf-drawable.c: #include <config.h>, and fix includes.

	* src/io-xpm.c: Fix includes.

	* src/io-tiff.c: Fix includes.

	* src/io-ras.c: Fix includes, and do not include more stuff than needed.

	* src/io-pnm.c: Fix inlcudes, and do not include more stuff than needed.

	* src/io-png.c: Fix includes.

	* src/io-ico.c: Fix includes, and do not include more stuff than needed.

	* src/io-gif.c: Fix includes, and do not include more stuff than needed.

	* src/io-bmp.c: Fix includes, and do not include more stuff than needed.

	* src/gnome-canvas-pixbuf.c: Fix includes.

	* src/gdk-pixbuf.c: Fix includes.

	* src/gdk-pixbuf-util.c: Fix includes.

	* src/gdk-pixbuf-render.c: Fix includes.

	* src/gdk-pixbuf-io.h: Fix includes.

	* src/gdk-pixbuf-drawable.c: Fix includes.

	* src/gdk-pixbuf-drawable.h: Use angle brackets for the gdk-pixbuf
	include files.

	* src/gdk-pixbuf-data.c: Fix includes.

	* src/gdk-pixbuf-loader.c: #include <config.h>

	* src/gdk-pixbuf-loader.h: Use angle brackets for the gdk-pixbuf
	include files.

	* src/Makefile.am: Commented out the gdk-pixbuf-drawable stuff,
	since it is not finished.

	* src/gdk-pixbuf.h: Removed unused transformation prototypes.

	* src/gdk-pixbuf-util.c: New file with utility and convenience
	functions for pixbufs.

	* src/Makefile.am (libgdk_pixbuf_la_SOURCES): Added gdk-pixbuf-util.c.

	* doc/gdk-pixbuf-sections.txt: Added section for utility functions.

	* doc/Makefile.am (tmpl_sources): Added tmpl/util.sgml.

	* doc/gdk-pixbuf.sgml: Added the utilities section.

	* doc/tmpl/util.sgml: Documentation for the utility functions.

1999-11-29  Owen Taylor  <otaylor@redhat.com>

	* src/gdk-pixbuf-render.c (gdk_pixbuf_render_to_drawable_alpha):
	Keep the mask around until after we draw ... since
	the GC changes aren't flushed to the X server until we
	draw, destroying it before that may result in BadPixmap
	errors.

1999-11-30  Havoc Pennington  <hp@pobox.com>

	* configure.in: Add AM_CONDITIONAL for inside gnome-libs

	* src/Makefile.am: conditionalize GnomeCanvasPixbuf

1999-11-29  Federico Mena Quintero  <federico@redhat.com>

	* src/Makefile.am: Uncomment the GnomeCanvasPixbuf sources.  This
	should be made conditional, not blindly commented out.

1999-11-29  Jonathan Blandford  <jrb@redhat.com>

	* src/Makefile.am (ICO_LIB): Added another loader from Arjan to
	handle .ico files.  Cool.

1999-11-24  Jonathan Blandford  <jrb@redhat.com>

	* src/io-bmp.c (OneLine24): new patch from Arjan to handle
	compressed bmps.

1999-11-24  James Henstridge  <james@daa.com.au>

	* configure.in (AC_OUTPUT): altered hack to place the symlink in the
	top builddir rather than src.  This still builds fine, and does not
	get gtk-doc into an infinite loop when trying to find all the source
	files.

1999-11-23  Jonathan Blandford  <jrb@redhat.com>

	* Removed #PRAGMA } from headers.  Also, make compile if you don't
	have it installed, already.

1999-11-22  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_draw): Create the
	temporary buffer to the size of the interesction of the bounding
	box and the expose area, not the whole expose area.  This speeds
	up things a lot.

	* src/gdk-pixbuf-render.c (gdk_pixbuf_render_threshold_alpha): Do
	not paint black on the mask, since we already cleared it in a
	single gdk_draw_rectangle() operation.

1999-11-22  Raja R Harinath  <harinath@cs.umn.edu>

	* configure.in (GDK_PIXBUF_DIR): Fix for srcdir != builddir.

1999-11-22  Havoc Pennington  <hp@pobox.com>

	* src/Makefile.am (GDK_PIXBUF_LIBS): Patch from Paul Fisher
	<pnfisher@redhat.com> adds all -lgdk-pixbuf and all other
	dependencies to LIBADD variables for loadable modules. Necessary
	for a Java dynamic loading thing to be able to figure it out.

1999-11-22  Havoc Pennington  <hp@pobox.com>

	* src/io-png.c (image_load_increment): Call the update_area
	callback depending on the number of rows loaded in this increment.

	* src/testpixbuf.c (main): slow down the progressive load demo

1999-11-16  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-drawable.h: Get the quotes right on the #include

1999-11-22  Jonathan Blandford  <jrb@redhat.com>

	* configure.in (GDK_PIXBUF_DIR): make the symlink.  Does not work
	for srcdir != buildir != .  Beats me why; I can't figure it out.
	AC_OUTPUT_COMMANDS doesn't seem to let me substitute it correctly.

1999-11-21  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-io.c: added io-bmp from Arjan
	<arjan@fenrus.demon.nl>

1999-11-20  Michael Zucchi  <zucchi@zedzone.mmc.com.au>

	* src/gdk-pixbuf-drawable.c (gdk_pixbuf_from_drawable_core):
	Rework/reorder of the code.  Each case has been separated into
	another function; its big but it should be quick.
	gdk_pixbuf_rgba_from_drawable() will now return a pixbuf with
	opaque alpha information.  Not all depths/formats have been
	tested, but 8, 15/16 and 24 (alinged 32) should work ok.

1999-11-17  Larry Ewing  <lewing@gimp.org>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_bounds):
	implement the bounds method correctly.
	(compute_viewport_affine): compute the affine need to fit the
	image within the viewport given by the args.
	(compute_render_affine): call compute_viewport_affine.

1999-11-16  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-drawable.h: Use includes from the current
	directory, not the system directory.

Mon Nov 15 17:18:28 1999  George Lebl <jirka@5z.com>

	* src/testpixbuf-drawable.c: use includes from the current directory
	  rather then from the system include directory as gdk-pixbuf
	  includes are not yet installed when this is compiled.

1999-11-13  Cody Russell  <bratsche@dfw.net>
	* src/testpixbuf-drawable.c: Added a test program for drawable
	code.

	* src/Makefile.am: Build testpixbuf-drawable.

1999-11-12  Cody Russell  <bratsche@dfw.net>

	* src/gdk-pixbuf-drawable.c: Merged in Michael Zucchi's changes.

1999-11-10  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/gdk-pixbuf-loader.sgml: Populated.

	* doc/gdk-pixbuf.signals: Put in the real names of signal
	arguments.

	* src/gdk-pixbuf-loader.c: Improved documentation comments.

1999-11-10  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_close): emit the
	closed signal.

	* src/io-ras.c (OneLineMapped_file): Now can handle indexing
	correctly.  Patch from Arjan to do so.

1999-11-10  Michael Fulbright  <drmike@redhat.com>

        * src/io-pnm.c (pnm_ascii_read_scanline): Fixed loading of ASCII PNM
	files.

	* src/testpixbuf.c: Added final queued draw when done loading image.

1999-11-10  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-io.c (gdk_pixbuf_load_module): removed spurious
	print statements.

1999-11-10  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf-io.c (gdk_pixbuf_new_from_xpm_data): Added
	documentation.

1999-11-09  Federico Mena Quintero  <federico@redhat.com>

	* src/io-png.c: Fixed some incompatible pointer initializations.

	* src/io-jpeg.c (image_load_increment): Remove unused variable.

1999-11-09  Michael Fulbright  <drmike@redhat.com>

        * src/testpixbuf.c: Fixed it to use timeout to read from file
	for progressive loading. Set TBF_KBPS=n, where n is the number of
	kilobytes/second to simulate in downloading. n has to be an integer.

	* src/io-jpeg.c: Slight cosmetic cleanup.

	* src/io-pnm.c: Fixed raw PNM loading bug. Also discovered that ASCII
        PBM loading has a similar problem and will address tomorrow.

1999-11-09  Havoc Pennington  <hp@pobox.com>

	* src/Makefile.am (libgdk_pixbuf_la_SOURCES): build the
	gdk-pixbuf-drawable stuff.

1999-11-09  Federico Mena Quintero  <federico@redhat.com>

	* configure.in: Bumped version number to 0.4.

1999-11-09  Michael Fulbright  <drmike@redhat.com>

	* src/io-pnm.c : Finished progressive PNM loading code. Should handle
	all types of PNM files now.

	* src/io-jpeg.c (image_load_increment): Figured out problem with
	loading Progressive JPEG's progressively (say that 10 times fast).
	Currently for Progressive JPEG's the entire image is loaded before
	it is displayed. libjpeg supports a fancier mechanism which I may
	implement later.

	With these changes all JPEG formats appear to load properly for me.

1999-11-08  Jonathan Blandford  <jrb@redhat.com>

	* src/io-ras.c (image_load_increment): Final patch from Arjan.
	Seems to do progressive loading.

1999-11-08  Michael Fulbright  <drmike@redhat.com>

	* src/io-pnm.c image_load (): Fixed so we do not create a separate
	pixel buffer when reading in image - we reuse the pixel data in
	the GdkPixbuf structure instead.

1999-11-08  Michael Fulbright  <drmike@redhat.com>

	* src/io-pnm.c pnm_read_ascii_scanline (): Added support for
	ASCII PNM files. Note I haven't tested loaded ASCII PBM files because
	I can't seem to find a utility to convert into this format.
	Next is to add progressive loading support for the PNM format.

1999-11-07  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/gnome-canvas-pixbuf.sgml: Finished detailed explanation
	of the width, height, x, and y setting and pixels arguments.

1999-11-05  Jonathan Blandford  <jrb@redhat.com>

	* src/io-ras.c (image_load): third patch.  Now it seems to load.

	* src/gdk-pixbuf-io.c: second patch Arjan van de Ven
	<arjan@fenrus.demon.nl> to autodetect/load the sunras files.

	* src/io-ras.c (image_load): new file from Arjan van de Ven
	<arjan@fenrus.demon.nl> to begin the ras loader.

1999-11-05  Federico Mena Quintero  <federico@redhat.com>

	* doc/gdk-pixbuf-sections.txt: Removed gdk-pixbuf-io, since it is
	for internal use only.

	* doc/gdk-pixbuf.sgml: Likewise.

	* doc/tmpl/gnome-canvas-pixbuf.sgml: Finished docs.

1999-11-05  Michael Fulbright  <drmike@redhat.com>

	* src/io-pnm.c: Implemented support for reading raw PBM/PGM/PPM
	files from a file. Next step is support for ASCII files, and
	then incremental loading.

1999-11-04  Federico Mena Quintero  <federico@redhat.com>

	* Makefile.am: Added doc to SUBDIRS.

1999-11-04  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpeg.c: Prettied up code slightly.
	* src/io-pnm.c:  Start of pnm loader (from file and progressively).
	                 Doesn't do much yet (will finish tomorrow).
	* src/gdk-pixbuf-io.c: Added pnm to structure of known types.

1999-11-04  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/rendering.sgml: Populated.

	* doc/Makefile.am: Added the template files.

1999-11-04  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-render.c (gdk_pixbuf_render_to_drawable): In
	docs, explain what a dither offset is for.
	(gdk_pixbuf_render_to_drawable_alpha): Explain why you would use
	this function vs. gdk_pixbuf_render_to_drawable().

1999-11-04  Havoc Pennington  <hp@pobox.com>

	* configure.in: Use libart-config correctly; find gnome-config
	separately. Fix GNOME_LIBS to be correct in "no gnome installed
	yet" case.

	* src/Makefile.am: Link to GNOME_LIBS instead of a hardcoded
	library list.

	Patch untested in the inside-gnome-libs case, I need to commit
	then check out to the gnome-libs I'm using.

1999-11-04  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpeg.c (image_begin_load): Add update_func callback.
	* src/io-jpeg.c (image_load_increment): Call updated callback when
	new graphic data decoded.

1999-11-04  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_update): handle the
	actual update.
	* src/io-png.c (image_begin_load): add a update_func callback.
	* src/io-gif.c (image_begin_load): add a update_func callback.
	(gif_get_lzw): added the update_func ability

	* src/io-tiff.c (image_begin_load): add a update_func callback.

1999-11-04  Federico Mena Quintero  <federico@redhat.com>

	* doc/tmpl/gdk-pixbuf.sgml: Populated.

	* doc/tmpl/refcounting.sgml: Populated.

	* doc/tmpl/file-loading.sgml: Populated.

	* src/gdk-pixbuf.c: Added documentation comments.

	* src/gdk-pixbuf-io.c (gdk_pixbuf_new_from_file): Added
	documentation comments.

	* doc/: Finished integrating the documentation framework.

1999-11-03  Federico Mena Quintero  <federico@redhat.com>

	* configure.in: Removed libgif stuff now that we do not depend on it.
	Added the necessary cruft for gtk-doc.

	* src/Makefile.am: Unconditionally build the GIF loader.

1999-11-03  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (gif_read): renamed ReadOK to gif_read.
	Added a lot of comments to the file.

	* src/Makefile.am (libpixbuf_gif_la_LIBADD): Remove dependency on
	lib*gif!!!!

1999-11-03  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpeg.c (image_load_increment): Further removal of
	bugginess in local buffering code. Handles grayscale jpegs
	correctly now.

	* src/io-jpeg.c (image_load_stop): Was freeing local context
	for jpeg library before calling jpeg_decompres_finish ().

1999-11-03  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (image_load_increment): now handle arbitrary buffer
	sizes.
	(gif_get_lzw): set the transparency to the right val.

1999-11-03  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_init):
	Initiailize the x and y fields.
	(gnome_canvas_pixbuf_destroy): Queue a redraw upon destruction.
	(PixbufPrivate): Renamed need_size_update to need_xform_update.
	(recompute_bounding_box): Do not use temporary values.

1999-11-03  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (set_gif_lzw_clear_code): new state.  Fixes
	un-compressed gifs.

	* src/gnome-canvas-pixbuf.c (recompute_bounding_box): remove
	unneeded x,y,h,w vars.

1999-11-03  Larry Ewing  <lewing@gimp.org>

	* src/gnome-canvas-pixbuf.c (compute_render_affine): adjust
	render_affine calculation for x,y offsets.
	(gnome_canvas_pixbuf_set_arg): add x,y args.
	(gnome_canvas_pixbuf_get_arg): add x,y args.
	(recompute_bounding_box): simply code using ArtDrect and the
	render_affine.  Removed compute_xform_vectors as it was no longer
	needed.

1999-11-03  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_point): I'm a
	doofus.  Return a distance, not a boolean, for opaque images.

	* src/gnome-canvas-pixbuf.c (recompute_bounding_box): Do proper
	rounding of bounding box coordinates.
	(gnome_canvas_pixbuf_bounds): Implemented the ::bounds() method.
	(gnome_canvas_pixbuf_draw): Use the correct alpha threshold value.

1999-11-03  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (gif_prepare_lzw): s/lwz/lzw/g

1999-11-03  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpg.c (image_load_increment): Fixed code which moved
	buffer around as new data comes in to work properly. JPEG progressive
	loading should be working now except for grayscale JPEG's, which I
	will look into next.

1999-11-03    <sopwith@redhat.com>
	* src/testpixbuf.c: A GtkFunction needs to return a value for deterministic behaviour.
	  Also put dot printing back in.

1999-11-03    <jrb@redhat.com>

	* src/io-gif.c (gif_get_extension): Read 'til the next empty block
	correctly, now.

1999-11-02  Cody Russell  <bratsche@dfw.net>
	* src/gdk-pixbuf-drawable.c: Changed the behavior to return NULL
	if part of the requested image is offscreen, rather than clipping
	the image.

1999-11-02  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (gif_fill_in_lines): Fill in the gif's blank areas
	for interlacing and progressive loading.

1999-11-02  Cody Russell  <bratsche@dfw.net>
	* src/gdk-pixbuf-drawable.c (gdk_pixbuf_from_drawable_core): Now
	calls gdk_pixbuf_new_from_art_pixbuf() instead of gdk_pixbuf_new().

1999-11-02  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c (gif_main_loop): Now progressive gif loading works!
	It's a little slow though. )-:

1999-11-02 Elliot Lee <sopwith@redhat.com>
	* src/gdk-pixbuf-loader.[ch], src/gdk-pixbuf-io.h: Make the arguments to the
	write/load_increment operations const-correct.

1999-11-02  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_point):
	Implemented the ::point() method.  We do a simple containment test
	instead of a full distance calculation since the canvas is going
	to change to that scheme, anyways.

1999-11-02 Elliot Lee <sopwith@redhat.com>

	* src/testpixbuf.c: Allow using $TBF_READLEN to specify the size of the chunks
	that are read from the input file.

1999-11-02  Larry Ewing  <lewing@gimp.org>

	* src/gnome-canvas-pixbuf.c (gnome_canvas_pixbuf_render): add aa
	render function.
	(gnome_canvas_pixbuf_class_init): add gnome_canvas_pixbuf_render
	to class.

1999-11-02  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c (compute_render_affine): Moved the
	affine computation code from ::draw() to here, since it is needed
	by ::point() as well.

1999-11-02 Elliot Lee <sopwith@redhat.com>

	* src/gdk-pixbuf-loader.c: Reorganize gdk_pixbuf_loader_write into
 	three functions, and eliminate duplication of code from write()
 	and close(). Also fix bug where the 128-byte header was being
 	written twice.

1999-11-01  Federico Mena Quintero  <federico@redhat.com>
	* src/gnome-canvas-pixbuf.c (recompute_bounding_box): Fixed
	bounding box computation.

1999-11-01  Federico Mena Quintero  <federico@redhat.com>

	* src/gnome-canvas-pixbuf.c: Start of the pixbuf canvas item.
	Drawing affines seem to work.  Bounding box is fubared.  ::point()
	is not implemented.  This is a work in progress.

	* src/Makefile.am: Added gnome-canvas-pixbuf.[ch] to the list of
	sources.

	* configure.in: Sigh.  We need to link in libgnomeui for the
	canvas stuff.  This mess will disappear when gdk-pixbuf gets
	folded into gnome-libs.

1999-10-30  Jonathan Blandford  <jrb@redhat.com>

	* src/io-gif.c: Some more work.  Now it generates a gdk_pixbuf of
	the right size, at a minimum, even if the image is squished and
	the wrong color.
	(ReadImage): lets get the offset right.  This will let transparent
	gifs work.

1999-10-29  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpeg.c: image_load_increment(): Fixed bug when
	image width was not a multiple of 4 - always use the
	gdk_pixbuf rowstride to increment pointers!

1999-10-29  Michael Fulbright  <drmike@redhat.com>

	* src/io-jpeg.c: Added first cut at progressive jpeg loading.
	Currently does not handle either progressive jpeg files (jpeg
	files with multiple scans at different quality settings), but
	I plan on adding this support soon. These are fairly rare in
	my experience, so it shouldn't slow people down too much.
	Grayscale jpegs also don't work but that should be easy to fix.

1999-10-29  Michael Fulbright  <drmike@redhat.com>

	* src/testpixbuf.c: Added title to windows so you can identify
	progressive and file windows.

1999-10-29  Michael Fulbright  <drmike@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_write): Actually
	load the image handler when we determine the image type.

	* src/gdk-pixbuf-io.[ch] (gdk_pixbuf_load_module): Changed the
	previously static function load_image_handler () to
	a public function gdk_pixbuf_load_module (). It is needed in
	gdk-pixbuf-loader.c to load image handler modules.  This function
	is different from gdk_pixbuf_get_module (), which only returns
	a reference to the required handler, because it actually loads
	the handler into memory. Both actions should possibly be combined
	in a convenience function since one w/o the other doesn't seem to
	make much sense.

1999-10-28  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_write): don't send a
	0 length buffer.

1999-10-28  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf-render.c (gdk_pixbuf_render_to_drawable): New
	function to render a portion of a pixbuf to a drawable.  Ignores
	alpha information and takes in a GC.
	(gdk_pixbuf_render_to_drawable_alpha): New function to render a
	portion of a pixbuf to a drawable.  It automatically creates a GC
	and a clipping mask for alpha pixbufs.

1999-10-28  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf.h: turned convenience macros into convenience
	functions so some error checking could be added.

	* src/io-tiff.c (image_load_increment): started work on the tiff
	non-incremental loader.
	(image_begin_load): Finished the incremental loader.

	* src/io-gif.c (image_load_increment): started work on the gif
	incremental loader.

	* src/gdk-pixbuf-io.h: Changed ModuleType to GdkPixbufModule.

1999-10-27  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf-render.c (gdk_pixbuf_render_threshold_alpha): New
	function to threshold a pixbuf's alpha channel into a bitmap.

	* src/gdk-pixbuf.c (gdk_pixbuf_new): Fixed so that it will
	contemplate future extensions to ArtPixBuf's formats.

	* src/io-png.c (png_info_callback): Use the new API of gdk_pixbuf_new().

	* src/gdk-pixbuf.h (gdk_pixbuf_get_height): Added some convenience
	macros to fetch the ArtPixBuf's fields.

1999-10-27  Havoc Pennington  <hp@pobox.com>

	* src/testpixbuf.c (main): Display the progressive load

	* src/io-png.c (setup_png_transformations): Break transformation
	code into separate function
	(png_info_callback): Use setup_png_transformations

1999-10-27  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-io.c (gdk_pixbuf_new_from_xpm_data): Check
	properly whether the XPM module has already been loaded
	(gdk_pixbuf_new_from_file): Check properly if loader module
	was already loaded (was checking if load symbol was present
	in order to decide whether to re-load; should check module !=
	NULL, then load != NULL)
	(image_handler_load): Check in present working directory,
	makes it easier to debug for now
	(file_formats): This array initializer was seriously on crack,
	was assigning a function pointer to a GModule*

	* src/testpixbuf.c (main): Change type of pixbuf_loader to GdkPixbufLoader*

1999-10-27  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_finalize):
	Fix typo that prevented compilation
	(gdk_pixbuf_loader_destroy): ditto

1999-10-27  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_new): Return a
	GdkPixbufLoader, not a GtkObject.
	(gtk_marshal_NONE__INT_INT_INT_INT): Made static.
	(gdk_pixbuf_loader_get_type): Documented.
	(gdk_pixbuf_loader_class_init): Initialize the parent class
	correctly.
	(gdk_pixbuf_loader_destroy): Added sanity checks. Call the parent
	class destroy function.
	(gdk_pixbuf_loader_new): Documented.
	(gdk_pixbuf_loader_finalize): Call the parent class finalize
	function.
	(gdk_pixbuf_loader_write): Use size_t for count.

1999-10-27  Michael Fulbright  <drmike@redhat.com>

	* src/gdk-pixbuf-loader.c (gdk_pixbuf_loader_destroy): Fixed
	logic so we only try to close loader if it wasn't previously closed.

1999-10-27  Michael Fulbright  <drmike@redhat.com>

	* src/gdk-pixbuf-loader.c: Made sure image_loader struct member of
	pixbuf_loader properly initialized.

	* src/testpixbuf.c: Made sure we cleanup pixbuf_loader properly
	when done.

1999-10-26  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-io.c (image_handler_load): load the vtable fully.

	* src/gdk-pixbuf-loader.c: Finished initial cut at the object.

1999-10-26  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf-loader.h: fix signals

	* src/gdk-pixbuf-io.h: add new vtable fields


1999-10-26  Jonathan Blandford  <jrb@redhat.com>

	* src/gdk-pixbuf-loader.h: New Class.  Beginning of progrssive
	loading.

1999-10-25  Federico Mena Quintero  <federico@redhat.com>

	* configure.in (CFLAGS): Patch from Uwe Koloska
	<koloska@Rcs1.urz.tu-dresden.de> to fix a stupid typo of mine.

1999-10-22  Havoc Pennington  <hp@pobox.com>

	* src/io-xpm.c (mem_buffer): Clean up stupid
	increment-inside-array-dereference thing

	* src/testpixbuf.c: Add XPM data tests.

	* src/io-xpm.c: Make the XPM data buffer const, fix const
	correctness throughout the code.

1999-10-22  Havoc Pennington  <hp@pobox.com>

	* src/gdk-pixbuf.h: Export gdk_pixbuf_new_from_xpm_data()

1999-10-22  Havoc Pennington  <hp@pobox.com>

	* src/io-xpm.c (image_load_xpm_data): Export this symbol for
	loading an XPM from memory.

	* src/gdk-pixbuf-io.c (gdk_pixbuf_new_from_xpm_data): New
	function, loads pixbuf from xpm data
	(image_handler_load): Add g_return_if_fail() to ensure the same
	module isn't loaded twice. Add g_module_symbol() to scan for XPM
	loader function.

1999-10-22  Federico Mena Quintero  <federico@redhat.com>

	* src/io-png.c (image_load): Patch from Kristian Hogsberg
	Kristensen <hogsberg@daimi.au.dk> to avoid allocating extra row
	buffers; the rows can be read in directly into the main pixel
	buffer.

1999-10-20  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf-io.c (image_handler_load): Free path.

1999-10-20  Federico Mena Quintero  <federico@redhat.com>

	* configure.in: Bumped version number to 0.3.

	* src/Makefile.am (lbgdk_pixbuf_la_LDFLAGS): Added a libtool
	version number for the library.

1999-10-20  Federico Mena Quintero  <federico@redhat.com>

	* src/gdk-pixbuf.h (GdkPixbuf): Removed the unref_fn field.  Now
	all memory management of the buffer is done by libart.

	* src/gdk-pixbuf.c (gdk_pixbuf_unref): Do destruction here.
	Removed gdk_pixbuf_destroy, gdk_pixbuf_duplicate.

	* src/gdk-pixbuf-data.c (gdk_pixbuf_new_from_data): Implemented in
	terms of the libart functions.  Removed the old code.

	* src/gdk-pixbuf-io.c (image_handler_load): Removed the save
	symbols.  Saving will not be implemented in GdkPixbuf.

	* src/io-gif.c: Removed the saving stub.
	(image_load): Fixed memory management to fail gracefully if we run
	out of memory while loading the image.  Close the gif file when we
	are done.  This still needs more error handling for the DGif
	functions.

	* src/io-jpeg.c (image_load): Some robustness fixes.

	* src/io-png.c: Removed the saving stuff.
	(image_load): Some memory management fixes.

	* src/io-tiff.c (image_load): Ditto.

	* src/io-xpm.c (pixbuf_create_from_xpm): Ditto.

1999-10-18  Havoc Pennington  <hp@pobox.com>

	* subautogen.sh: New name for macros/autogen.sh

	* autogen.sh: use subautogen.sh

1999-10-18  Federico Mena Quintero  <federico@redhat.com>

	* src/*: Reindented to use the GNOME Indentation.  Renamed
	GdkPixBuf to GdkPixbuf, for consistency with the function names
	(and it is also easier to type) :-)

1999-10-18  Havoc Pennington  <hp@pobox.com>

	* configure.in: Use AM_PATH_GLIB instead of glib-config directly

	* src/Makefile.am: Re-enable testpixbuf with GTK_CFLAGS/GTK_LIBS

1999-10-18  Havoc Pennington  <hp@pobox.com>

	* Makefile.am (SUBDIRS): Remove "macros"

	* configure.in: Don't use GNOME_INIT, handle case where we are
	inside gnome-libs. AM_PATH_GTK for the GIF test

	* src/Makefile.am: Change flags to work without libgnomeui,
	comment out testpixbuf for now

1999-10-18  Federico Mena Quintero  <federico@redhat.com>

	* configure.in: Use $GTK_LIBS as the extra libs when checking for
	libgif/libungif, as they need the X libraries.  Fixes bug #2472.

1999-10-10  Cody Russell  <bratsche@dfw.net>
	* src/gdk-pixbuf-drawable.c: core function now determines whether
	the requested geometry is on screen or not, and if some is not
	then the request is clamped to geometry that is on the screen.

	Changed 'pixbuf' to 'art_pixbuf' in core function.

1999-10-08  Michael Fulbright  <drmike@redhat.com>

	* src/gdk-pixbuf-data.c: Added to load rgb data from const data.

	* src/testpifbuf: Changed test program to display cdrom from rgb data
	if no filename given to test program.

1999-10-07  Cody Russell  <bratsche@dfw.net>
	* src/gdk-pixbuf-drawable.[ch]: Added. (Actually, Miguel committed
	them, but I wrote them).

	* src/gdk-pixbuf-drawable.h: Added a missing ; so things will now
	compile.

	* src/Makefile.am: Added gdk-pixbuf-drawable.[ch] to
	libgdk_pixbuf_la_SOURCES and libgdk_pixbufinclude_HEADERS.

	* src/gdk-pixbuf-drawable.c: Added #include "gdk-pixbuf-drawable.h"
	to fix compilation.

	* src/gdk-pixbuf-drawable.[ch]: Changed functions to return
	GdkPixBuf* instead of ArtPixBuf*.

1999-09-22  Michael Meeks  <michael@nuclecu.unam.mx>

	* src/gdk-pixbuf.c (gdk_pixbuf_new): created.
	(gdk_pixbuf_scale): use gdk_pixbuf_new + return a new scaled image.

	* src/gdk-pixbuf.h (struct _GdkPixBuf): Re-organise struct, + add
	GdkPixBufUnrefFunc + gdk_pixbuf_new.

	* src/io-jpeg.c (image_load): clean to use gdk_pixbuf_new.

	* src/io-xpm.c (_pixbuf_create_from_xpm): ditto.

	* src/io-tiff.c (image_load): ditto + fix leak

	* src/io-png.c (image_load): ditto + add more exit points; monitor.png
	crashes this module ( add warning :-)

	* src/io-bmp.c (image_load): ditto.

	* src/io-gif.c (image_load): ditto.

1999-09-18  Michael Meeks  <michael@nuclecu.unam.mx>

	* src/gdk-pixbuf.c (gdk_pixbuf_scale): Hack rgba support in so
	it doesn't crash scaling with alpha.

1999-09-17  Federico Mena Quintero  <federico@redhat.com>

	* src/io-bmp.c (image_load): Set the initial ref_count to 1.

	* src/io-gif.c (image_load): Likewise.

	* src/io-jpeg.c (image_load): Likewise.

	* src/io-png.c (image_load): Likewise.

	* src/io-tiff.c (image_load): Likewise.

	* src/io-xpm.c (_pixbuf_create_from_xpm): Likewise.

	* src/gdk-pixbuf-io.c (gdk_pixbuf_load_image): Added an assertion
	for the ref_count to be != 0.

	* src/gdk-pixbuf.c (gdk_pixbuf_ref): Be more paranoid with sanity
	checking.
	(gdk_pixbuf_unref): Fix incorrect sanity check and comparison.

1999-08-09  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* src/io-png.c (image_save): Fixed compiler warnings.  Fixed write
	to unallocated memory (row_ptr), and fixed its type as well.  Take
	into account the ArtPixbuf's rowstride when assigning the row
	pointers.

	* src/gdk-pixbuf.c: Fixup includes.

	* src/gdk-pixbuf-io.c: Likewise.

Sat Jul 31 19:19:47 CEST 1999

	* src/gdk-pixbuf-io.c:
	* src/io-png.c: Fixed two obvious C syntax bugs

1999-07-29  Mark Crichton  <crichton@gimp.org>

	* src/io-png.c (image_save): Added PNG saving function

	* src/gdk-pixbuf-io.c: Changed image_save function format.  Now it's
	image_save(GdkPixBuf *p, FILE *f, ...)


1999-07-26  Michael Zucchi  <mzucchi@denr.sa.gov.au>

	* src/Makefile.am (*_LIB): Only build the relevant loaders which
	require extra libraries if we actually have those libraries.

1999-07-23  Richard Hestilow  <hestgray@ionet.net>

	* src/gdk-pixbuf.h: Include glib.h as it uses g* datatypes
	* gdk_pixbufConf.sh.in: Added for gnome-config
	* Makefile.am:
	* configure.in: Modified to generate gdk_pixbufConf.sh

1999-07-20  Mark Crichton  <crichton@gimp.org>

	* src/gdk-pixbuf.c (gdk_pixbuf_rotate): Fixed rotation.  Now a bbox
	calculation needs to be done.

1999-07-18  Larry Ewing  <lewing@gimp.org>

	* src/io-xpm.c:
	* src/io-gif.c:
	* src/io-png.c:
	* src/io-jpeg.c: Fix a few memory leaks in the, most of them in
	error cases but one or two in the common case.  There are probably
	a few small ones left.

1999-07-18  Mark Crichton  <crichton@gimp.org>

	* configure.in: removed version.h.

	* src/gdk-pixbuf-io.c (pixbuf_check_tiff): Minor readability
	improvements.

1999-07-17  Mark Crichton  <crichton@gimp.org>

	* src/gdk-pixbuf.c: Removed gdk_pixbuf_free, redundant code.
	(gdk_pixbuf_rotate): Added pixbuf rotation code.
	(gdk_pixbuf_scale): Changed // comments to /* */

	* src/gdk-pixbuf.h (gdk_pixbuf_destroy): Added gdk_pixbuf_destroy
	function to header.

1999-07-16  Larry Ewing  <lewing@gimp.org>

	* src/testpixbuf.c (expose_func): reverted the expose everything
	changes, I'm not sure why these went in.
	(config_func): bring this up to date with the new pixbuf_scale
	semantics.

	* src/gdk-pixbuf-io.c: added a couple of warnings to the module
	loading code so that poeple can diagnose problems better.

	* src/gdk-pixbuf.c (gdk_pixbux_scale): fix the borkedness, also it
	no longer allocates a new pixbuf, which make things nicer for the
	rest of the code.  Unfortunately there is still a problem with
	scaling rgba images.

1999-07-16  Mark Crichton  <crichton@gimp.org>

	* src/testpixbuf.c (config_func): ConfigureEvent handler.  This
	calls gdk_pixbuf_scale.  However, something is not working.
	N.B.: current pixmap is now stored in user_data with a key of
	"pixmap"

	* src/gdk-pixbuf.c (gdk_pixbuf_scale): Implemented scaling function.
	Something is still borked, however.

1999-07-15  Larry Ewing  <lewing@gimp.org>

	* src/io-jpeg.c (image_load): add raph@gimp.org's fix to the jpeg
	indexing routine

	* src/testpixbuf.c (main): fix up the file routines a little so
	that you can load multiple files given the file names

1999-07-14  Larry Ewing  <lewing@gimp.org>

	* src/testpixbuf.c (expose_func): added an almost proper expose
	handler for testpixbuf

1999-07-13  Mark Crichton  <crichton@gimp.org>

	* configure.in: Fixed GIF check.  Replaced " with '
	* src/gdk-pixbuf.c: More (minor) work on gdk_pixbuf_scale

1999-07-13  Mark Crichton  <crichton@gimp.org>

	* configure.in: I am a bonehead.  Added gif-lib check.
