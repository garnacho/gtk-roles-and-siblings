2008-04-06  Tristan Van Berkom <tvb@gnome.org>

	* gtk/gtkwidget.c: Clarified a g_warning message regarding
	parsing accelerators from builder files.

2008-04-03  Cody Russell  <bratsche@gnome.org>

	* gtk/gtkprintoperation-win32.c: Fix variable declared in the middle
	of the block. (#526021, reported by Kazuki IWAMOTO)

2008-04-03  Tor Lillqvist  <tml@novell.com>

	Bug 330743 - Up/down spinbuttons won't take zeros and exhibit very
	strange behavior

	* gtk/gtkspinbutton.c (gtk_spin_button_insert_text) [Win32]: Add
	workaround for a specific kind of screwed up locale setting.

2008-04-02  Matthias Clasen  <mclasen@redhat.com>

	* gdk/x11/gdkcolor-x11.c: Don't call XFreeColormap on foreign
	colormaps.  Found by Daniel Berrange.

2008-04-02  Björn Lindqvist  <bjourne@gmail.com>

	* tests/autotestfilechooser.c: Cover
	GTK_FILE_CHOOSER_ACTION_CREATE_FOLDER action in tests for current
	name. (#346058, Joe Halliwell)

2008-04-02  Federico Mena Quintero  <federico@novell.com>

	Fix http://bugzilla.gnome.org/show_bug.cgi?id=492134 - The file
	chooser incorrectly substitutes and expands a ~ when you type it
	in the filename entry.

	* gtk/gtkfilesystemunix.c (expand_tilde): Ensure that empty
	basenames result in a slash-terminated pathname.
	gtk_file_system_unix_parse() is correct, but it was splitting
	"/home/username" into path="/home" and file_part="username", which
	is not what the caller wants when the entry has just "~" or
	"~username".

2008-04-02  Tor Lillqvist  <tml@novell.com>

	* gtk/Makefile.am: Don't bother compiling gtksearchenginebeagle.c
	and gtksearchenginetracker.c on Windows.

	* gtk/gtksearchengine.c: Don't define HAVE_BEAGLE and HAVE_TRACKER
	on Windows.

2008-04-01  Cody Russell  <bratsche@gnome.org>

	* configure.in: Bump required Cairo to 1.5.2.

	* gtk/gtkprintoperation-win32.c: Add support for using the new
	cairo_win32_printing_surface for printing.  Also fixed to use
	cairo_surface_show_page(). (#488833 and #521178)

2008-03-31  Cody Russell  <bratsche@gnome.org>

        * demos/gtk-demo/printing.c (draw_page): Move down each line in         
        units of text_height rather than in units of data->font_size.
        (totally awesome catch by Dom Lachowicz)

2008-03-28  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c: (gdk_event_translate),
	(_gdk_quartz_events_trigger_crossing_events): Defer the generated
	event to the mainloop and don't generate one at all if the
	toplevel didn't change. Use the actual window and not the toplevel
	as event window. These changes make the generated crossing events
	match the X11 behavior and fixes issues with e.g. tooltips,
	comboboxes and menus.

	* gdk/quartz/GdkQuartzView.c: Don't update the tracking rect if
	the view has no window, it will be updated as soon as it's put
	inside a window.

	* gdk/quartz/gdkwindow-quartz.c:
	(_gdk_quartz_window_debug_highlight): Make it possible to track
	multiple windows with debug highlighting.
	(show_window_internal): Remove workaround for tooltips and popups
	that is no longer needed with the above changes.

2008-03-26  Federico Mena Quintero  <federico@novell.com>

	* gtk/gtkfilechooserentry.c (commit_completion_and_refresh): New
	helper function; factored out from the functions that commit the
	current suggested autocompletion and that refresh the entry's paths.
	(gtk_file_chooser_entry_activate): Use commit_completion_and_refresh().
	(_gtk_file_chooser_entry_get_file_part): Likewise.
	(_gtk_file_chooser_entry_get_current_folder): Likewise.  This
	makes the entry have the correct paths when *not* using any form
	of completion (and makes the file chooser work when clicking the
	OK button).

2008-03-25  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c:
	(_gdk_quartz_events_trigger_crossing_events): Bail out early if we
	can't find a matching window.

	* gdk/quartz/gdkwindow-quartz.c: (show_window_internal): Add a
	comment, and only trigger an event for non-temp windows, fixes
	problems for tooltips caused by the workarounds for the
	problematic tracking rect API.

2008-03-25  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c:
	(gdk_window_quartz_process_all_updates): Plug a leak and add a
	check that we have a toplevel before accessing it.

2008-03-24  Tor Lillqvist  <tml@novell.com>

	Bug 524151 - Dragging of 0-byte files results in an empty filename
	on Windows XP and above

	* gdk/win32/gdkdnd-win32.c (resolve_link): Check for the file
	being empty first. For some reason ISHellLink and IPersistFile
	succeeds in interpreting empty files as shortcuts, claiming the
	target of the shortcut is an empty path.

	Change the function to take the wide character file name that the
	caller already has anyway, to avoid a superfluous conversion from
	UTF-8 to UTF-16.

2008-03-23  Björn Lindqvist  <bjourne@gmail.com>

	* gdk-pixbuf/gdk-pixbuf-io.c (gdk_pixbuf_new_from_xpm_data): Guard
	against NULL pointer. (#467051, Gian Mario Tagliaretti)

2008-03-23  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkevents-win32.c (show_window_recurse):
	Check window state for GDK_WINDOW_STATE_ICONIFIED before doing
	ShowWindow (SW_RESTORE).  This fixes a problem where tearing off
	menus from a maximized window would force the window to restore
	its size. (#518846)

2008-03-23  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert:
	Properly convert GtkImageMenuItems which use stock labels but don't
	have any children.
	(#523932, Brian Pepple)
	
2008-03-22  Matthew Barnes  <mbarnes@redhat.com>

	* gtk/gtkentrycompletion.c (gtk_entry_completion_get_cells):
	New function implements GtkCellLayoutClass::get_cells.  (#523787)

2008-03-22  Tor Lillqvist  <tml@novell.com>

	Bug 523782 - Leftover call to GDK_THREADS_LEAVE() in gtktoolbar.c

	* gtk/gtktoolbar.c (slide_idle_handler): Remove obviously wrong
	GDK_THREADS_LEAVE() call. Approved by mclasen.

2008-03-22  Björn Lindqvist  <bjourne@gmail.com>

	* gtk/gtkexpander.c (gtk_expander_get_label):
	gtk_label_get_label() should be used instead of
	gtk_label_get_text(). (#353088, Xan Lopez)

2008-03-21  Tor Lillqvist  <tml@novell.com>

	Import the GDI+ gdk-pixbuf loaders for Windows by Dominic
	Lachowicz and Alberto Ruiz into the GTK+ tree, from the
	gdip-pixbuf-loader module.

	* configure.in: Add switch --disable-gdiplus-loaders that disables
	building of the GDI+ loaders.

	When including loaders in the gdk-pixbuf library, and building
	GDI+ loaders, either build in all the GDI+ loaders or none of
	them. Use just -DINCLUDE_gdiplus in $INCLUDED_LOADER_DEFINE to
	signal building them in.

	Add Automake conditionals BUILD_GDIPLUS_LOADERS to indicate
	whether the GDI+ loaders should be built and INCLUDE_GDIPLUS to
	indicate whether they should be built-in.
	
	For the rest of the changes, see gdk-pixbuf/ChangeLog.
	
2008-03-20  Tor Lillqvist  <tml@novell.com>

	* gtk/Makefile.am: Revert accidental change that went in as part
	of the commit on 2008-03-18. Do use grep -o. Unbreaks build on
	Darwin. On Windows one has to use a newer GNU grep that has -o,
	for instance the one from gnuwin32, instead of the oldish one in
	MSYS that doesn't have -o.

2008-03-20  Tor Lillqvist  <tml@novell.com>

	* tests/testfilechooserbutton.c (chooser_update_preview_cb): Don't
	pass NULL for %s to g_message().
	(main): Drop unnecessary call to gtk_widget_destroy().

2008-03-20  Tor Lillqvist  <tml@novell.com>

	Bug 314084 - GTK+ dialogs should not be placed partially offscreen

	* gtk/gtkwindow.c (clamp): New function. Clamps a window position
	in one dimension, or centered in case it doesn't fit.
	(clamp_window_to_rectangle): Simplify. Call clamp() for x and y
	dimensions.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	Bug 523225 - modules/input/im*.c: MODULE_ENTRY macros make illegal code
	
	* modules/input/im*.c: Modify the MODULE_ENTRY macro so the
	G_MODULE_ENTRY decoration can be put in a more correct place.

2008-03-18  Sven Neumann  <sven@gimp.org>

	* gtk/gtkmountoperation.c (gtk_mount_operation_ask_password): set
	alternative button order on the password dialog.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	Bug 99192 - Add --with-include-input-modules

	* configure.in: Add --with-included-immodules switch. Handled in a
	similar way as the --with-included-loaders switch. For each input
	method module foo: Collect the list of input modules to be built
	into libgtk into INCLUDED_IMMODULE_OBJ. Collect a list of
	-DINCLUDE_IM_foo definitions into INCLUDED_IMMODULE_DEFINE.
	Define Automake conditionals INCLUDE_IM_FOO.

	* modules/input/Makefile.am: For modules to be included in libgtk,
	build a static library.
	
	* modules/input/im*.c: Use MODULE_ENTRY macros much like in
	gdk-pixbuf to get unique names for the functions called by libgtk
	in the included case. Use G_MODULE_EXPORT in the non-included case
	so that we don't unnecessarily export unneeded random global
	symbols on Windows.

	* gtk/Makefile.am: Build the included modules and link them into libgtk.

	* gtk/gtkimmodule.c: Handle the built-in modules. Remove
	copy/paste leftover mentions of "themes" in comments.

2008-03-18  Tor Lillqvist  <tml@novell.com>

	* tests/Makefile.am: Build testmountoperation only on Unix for now.

2008-03-17  Christian Kellner  <gicmo@gnome.org>

	Implement GtkMountOperation, a subclass of GMountOperation
	to be used with gio wherever there is the need to ask the
	user for credentials or questions while mounting a volume.
	This is bug #522245

	* gtk/gtkmountoperation.c:
	* gtk/gtkmountoperation.h:
	Implement GtkMountOperation.
	
	* gtk/gtk.h: Add gtkmountoperation.h
	* gtk/Makefile.am: Add gtkmountoperation.[hc]
	* gtk/gtk.symbols: Add symbols of GtkMountOperation.
	* tests/testmountoperation.c: Test program for it.
	* tests/Makefile.am: Add testmountoperation.

2008-03-17  Emmanuele Bassi  <ebassi@gnome.org>

	* gtk/gtkcontainer.c: Properly document
	gtk_container_set_focus_child(). (#521739, Andrew Cowie)

2008-03-16  Alberto Ruiz <aruiz@gnome.org>

	* modules/engines/ms-windows/Theme/gtk-2.0/gtkrc: more descriptive
	style names for the ComboBox thickness style

2008-03-16  Alberto Ruiz <aruiz@gnome.org>

	* modules/engines/ms-windows/Theme/gtk-2.0/gtkrc:
	* modules/engines/ms-windows/msw_style.c (draw_box) (draw_arrow)
	(combo_box_draw_arrow) (setup_msw_rc_style): draw box does more
	intelligent separation for the xp theming engine and the classic
	theme while drawing the GtkComboBox button.  combobox_draw_arrow
	is not used anymore, commented.  The style has been updated to fix
	border/thickness glitches in the combobox according to the fixes
	commited regarding bug #521442. (bug #461805)

2008-03-16  Alberto Ruiz <aruiz@gnome.org>

	* gtk/gtkcombobox.c: (gtk_combo_box_size_allocate) The child is
	now aware of both the combobox and frame (if has-frame is set)
	thickness and border. (bug #521442)

2008-03-15  Andre Klapper  <a9016009@gmx.de>

	* configure.in: Added "si" to ALL_LINGUAS.

2008-03-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktreeview.c (gtk_tree_view_ensure_interactive_directory):
	Set window type hint on the search popup.  (#522279, Danny Baumann)

2008-03-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkimcontextsimple.c: Emit preedit_start/_end as
	appropriate.  (#521934, Huang Peng)

2008-03-14  Michael Natterer  <mitch@imendio.com>

	* gdk/gdkspawn.h
	* gtk/gtkbuilderprivate.h
	* gtk/gtkfilechoosersettings.c
	* gtk/gtksearchenginesimple.c
	* gtk/tests/liststore.c
	* gtk/tests/treestore.c: remove single-file includes of GLib
	headers or replace them by <glib.h> where needed.

2008-03-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkadjustment.c: coding style cleanup.

	(gtk_adjustment_set_property): no need to call g_object_notify()
	on the set properties.

	Implement GObject::dispatch_properties_changed() and make sure we
	emit "changed" when anything but the "value" property changes.

2008-03-14  Tor Lillqvist  <tml@novell.com>

	* gdk/win32/gdkevents-win32.c: Drop the support for the
	MSH_MOUSEWHEEL message that MSDN says is used only on NT 3.51 and
	Win95. Thanks to mitch for noticing this obsolete code.

2008-03-14  Cody Russell  <bratsche@gnome.org>

	* examples/scribble-xinput/scribble-xinput.c: Changed
	'void int main()' to 'int main()'. (#522211, Liqing Huang)
	
2008-03-14  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c:
	(gdk_window_quartz_process_all_updates): Patch from Paul Davis,
	only flush the toplevel once per update.

2008-03-13  Federico Mena Quintero  <federico@novell.com>

	* gtk/gtkfilechooserentry.c (create_completion_feedback_window):
	Set the mouse cursor of the feedback window to invisible, so that
	we respect GtkEntry's invisible cursor while typing.

2008-03-13  Federico Mena Quintero  <federico@novell.com>

	* gtk/gtkfilechooserentry.c (show_completion_feedback_window): Put
	the feedback window at entry_height/2 pixels to the right of the
	cursor, for a cheap "M-width / 2" spacing.

2008-03-13  Sven Neumann  <sven@gimp.org>

	* gtk/gtkfilechooserdefault.c
	* gtk/gtkprintunixdialog.c: set alternative button order for
	overwrite confirmation dialogs (bug #522191).

2008-03-13  Sven Neumann  <sven@gimp.org>

	* gtk/gtkprintunixdialog.c (add_custom_button_to_dialog)
	(overwrite_confirmation_dialog): added some line-breaks for
	readability.

2008-03-12  Federico Mena Quintero  <federico@novell.com>

	Rework the way completion works in GtkFileChooserEntry.  Fixes
	http://bugzilla.gnome.org/attachment.cgi?bugid=314873 - 
	Tab completion should work even if the cursor is not at the end of
	the entry.

	* gtk/gtkfilechooserentry.c: Change the strategy by which we do
	completion.

	We distinguish between two cases:

		- autocompletion - happens only in the Open modes by
		  inserting and selecting the common prefix as you type.

		- explicit completion - happens when you hit Tab.

	When some type of completion needs to happen, the entry first
	parses its input and sees if it needs to initiate a folder load.
	Completion will not happen until the folder finishes loading.

	If the folder is already completely loaded, then completion is
	performed immediately.  Otherwise, the entry queues a pending
	completion and starts loading the new folder (or waits until the
	current folder is completely loaded).

	Tab completion is allowed to happen even if the cursor is not at
	the end of the entry.

	There is a new feedback mechanism for explicit completion, so that
	you will get an Emacs-like tip whenever there are ambiguities in
	completion, no matches, etc.  (This needs to be polished so that
	we support RTL entries and all the fancy Pango layout in GtkEntry).

	The only remaining thing to fix is the popup suggestion window.
	Unfortunately, GtkEntryCompletion does not let us do what we want,
	and will need further changes.

2008-03-12  Tor Lillqvist  <tml@novell.com>

	Bug 510000 - GtkStatusIcon doesn't reshow after explorer.exe crash

	* gtk/gtkstatusicon.c [Win32]: Keep a list of status icons. Check
	for the TaskbarCreated message in the window procedure for the
	dummy "tray observer" window we create. When we get a
	TaskbarCreated message, iterate over the status icons and re-add
	them to the task bar, and update them by calling
	gtk_status_icon_update_image().

	Move some ifdefs around to avoid unused functions.

2008-03-12  Tor Lillqvist  <tml@novell.com>

	* config.h.win32.in: Update to match what configure produces.

2008-03-12  Jens Granseuer  <jensgr@gmx.net>

	* modules/printbackends/cups/gtkprintbackendcups.c:
	(cups_printer_prepare_for_print): Don't define variables in the
	middle of a block. (#522067)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkprintunixdialog.c: Add an overwrite confirmation 
	dialog for print-to-file.  (#474302, Marek Kašík)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/gtkprintbackendcups.c: Fix a crash
	(#469210, Wouter Bolsterlee)

2008-03-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkpagesetup.c (gtk_page_setup_copy): Don't leak 
	paper_size here.  (#488820, Morten Welinder)

2008-03-12  Michael Natterer  <mitch@imendio.com>

	* acconfig.h: remove this deprecated file.

	* configure.in: added comments to all instances of AC_DEFINE() so
	config.h can be completely generated from configure.in.

2008-03-12  Michael Natterer  <mitch@imendio.com>

	* modules/printbackends/cups/gtkprintbackendcups.c: include
	<glib/gstdio.h> for g_fopen().

2008-03-11  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/gtkprintbackendcups.c: Use
	g_ascii_formatd when formatting custom paper sizes, since
	cups doesn't handle , as decimal separator.  (#521548)

2008-03-11  Tor Lillqvist  <tml@novell.com>

	Bug 469868 - Filenames with colon ":" are not saved correctly

	* gtk/gtkfilechooserentry.c (insert_text_callback)
	(delete_text_callback) [Win32]: New functions to make sure that
	colons used otherwise than as a separator after a drive letter, or
	characters that are always illegal in file names, are rejected on
	input. This means that the GTK+ file chooser can't be used to
	input full names of alternate data streams, but oh well. There are
	still more checks that could be done on the file names, see the
	bug report. But this will do for now.
	(_gtk_file_chooser_entry_init) [Win32]: Connect above functions.

2008-03-11  Jordi Mallach  <jordi@sindominio.net>

	* configure.in (ALL_LINGUAS): Add ca@valencia (Valencian-Catalan).

2008-03-11  Michael Natterer  <mitch@imendio.com>

	* gdk/linux-fb/*: removed linux-fb backend files.

	* acconfig.h
	* config.h.win32.in
	* docs/README.linux-fb
	* gtk/Makefile.am: remove remaining traces of linux-fb.

	* gtk/gtkwindow-decorate.c: same here. There is some code that
	calls into linux-fb to set window move/resize callbacks. I put it
	in #if 0 as a reminder because we did use decorated windows with
	the DirectFB backend and it did work, so I don't really know why
	this code is needed or how it could work with DirectFB back then.
	The file does actually compile now if DECORATE_WINDOWS is defined,
	but I didn't test with DirectFB to check if it does anything.

2008-03-11  Alberto Ruiz  <aruiz@gnome.org>

	* gtk/gtkcombobox.c (gtk_combo_box_size_allocate):
	Take thickness into account in the size allocation of the child widgets in
	list mode.
	Fixes #521442

2008-03-11  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: Implement gdk_window_reparent.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	* tests/teststatusicon.c (do_exit, popup_menu): Add the
	possibility to test what happens if the process just calls exit()
	without any orderly cleanup of GTK+.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	* gtk/gtktrayicon-win32.c: Remove from SVN, finally.

2008-03-10  Tor Lillqvist  <tml@novell.com>

	Bug 520286 - Non-deletable window has no minimize / maximize buttons

	* gdk/win32/gdkmain-win32.c (_gdk_win32_window_style_to_string):
	New debugging output function that decodes a set of WS_* bits.

	* gdk/win32/gdkprivate-win32.h: Declare it.

	* gdk/win32/gdkwindow-win32.c (update_single_system_menu_entry):
	New function that enables or disables one menu entry in the system
	menu of a top-level window. (The corresponding decoration will
	then also be enabled or disabled (grayed).)

	(update_style_bits): Do as the comment says and don't try to
	update the window style based on the GdkWMFunctions set for the
	window.
		   
	(update_system_menu): New function that enables or disables the
	system menu entries based on a window's stored set of
	GdkWMFunctions.

	(gdk_window_set_functions): Call update_system_menu() instead of
	update_style_bits().

2008-03-10  Emmanuele Bassi  <ebassi@gnome.org>

	* README.in: Reword the 2.14 release notes entry about the
	deprecation of the gtkitemfactory.h header, and fix typos
	and grammar.

2008-03-08  Alberto Ruiz  <aruiz@gnome.org>

	* modules/engines/ms-windows/msw_style.c (draw_shadow):
	Do not draw frame if parent if combobox.
	(draw_box):
	Uses scrollbar width system metrics for combobox button.
	Fixes #461805 for XP theme engine.

2008-03-07  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkbuilder.c:
	* gtk/gtkbuilderparser.c:
	* gtk/gtkbuilderprivate.h:
	* gtk/gtkiconfactory.c:
	* tests/buildertest.c:
	- Treat enums like enums and not values
	- Avoid invalid free, in case of more than two sources
	- Add better error messages
	- Add much improved tests
	(#520979, Christian Persch)

2008-03-07  Carlos Garnacho  <carlos@imendio.com>

	* gtk/gtkiconfactory.c (gtk_icon_factory_buildable_custom_tag_end):
	Fix build.

2008-03-06  Federico Mena Quintero  <federico@novell.com>

	Fix http://bugzilla.gnome.org/show_bug.cgi?id=505857 -
	GtkFileChooserDialog should set a default response button if the
	app doesn't set it.  Based on a patch by Chris Wang <chris.wang@sun.com>.

	* gtk/gtkfilechooserdialog.c (is_stock_accept_response_id): New
	function, refactor from where there was duplicated code.
	(gtk_file_chooser_dialog_map): Look at the buttons in our
	action_area.  If the response ID for a button is one of the stock
	ones, make it the default response button.

2008-03-06  Johan Dahlin  <jdahlin@async.com.br>

	* docs/reference/gtk/tmpl/gtkiconfactory.sgml:
	* gtk/gtkbuilder.c:
	* gtk/gtkbuilderprivate.h:
	* gtk/gtkiconfactory.c:
	* tests/buildertest.c:
	Implement GtkBuildable on GtkIconFactory, to make
	it possible to register custom stock icons.
	Fixes #517066

2008-03-06  Johan Dahlin  <johan@gnome.org>

	Make gtk-doc happy:
	
	* gtk/gtkstyle.c: npoints->n_points.
	* gtk/gtktestutils.h: widget->spinner
	* gtk/gtktestutils.c: argc->argcp, argv->argvp

2008-03-06  William Lachance <wrlach@gmail.com>

	* gtk/gtkfilechooserdefault.c: Oops, forgot to make the raw "%H:%M" 
	string localizable (as it should be). 

2008-03-06  William Lachance <wrlach@gmail.com>

	* gtk/gtkfilechooserdefault.c: Don't print "Today at" in front of
	the time for today's date. It's redudant. (see bug #410517).

2008-03-06  Xan Lopez  <xan@gnome.org>

	* gtk/gtkfixed.c: fix typo in documentation.

2008-03-06  Johan Dahlin  <jdahlin@async.com.br>

	* gtk/gtkitemfactory.h:
	* gtk/gtktypeutils.h:
	Move GtkTranslateFunc to gtktypeutils.h so we can completely
	deprecate gtkitemfactory.h. 

	* gtk/gtkactiongroup.h:
	* gtk/gtkstock.h:
	Do not include gtkitemfactory.h directly, instead include gtktypeutils.h

	* README.in: 
	Add a note describing this slight incompatible change
	
2008-03-06  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkpreview.h: Avoid double-deprecation.

2008-03-06  Michael Natterer  <mitch@imendio.com>

	* gtk/gtk.h
	* gtk/Makefile.am: move the remaining deprecated widgets to the
	separate sections and replaced spaces by tabs in Makefile.am

2008-03-05  Johan Dahlin  <johan@gnome.org>

	* configure.in: Add --disable-cups option.
	(#513826, Alberto Ruiz)

	* gtk/gtk.h: 
	* gtk/Makefile.am:
	Separate broken and deprecated sources and headers into different sections

	* tests/buildertest.c (test_list_store): Restore accidentally broken test.

2008-03-05  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c (gtk_tree_model_filter_row_inserted):
	short-circuit in case an empty root level would be build (and thus
	directly destroyed) if no virtual root has been set.

2008-03-04  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/gtkprintbackendcups.c: 
	Honor cups user default options from ~/.cups/lpoptions
	(#469210, Stijn Hoop)

2008-03-04  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcellview.c
	* gtk/gtkcolorbutton.c
	* gtk/gtkentrycompletion.c
	* gtk/gtkfontbutton.c
	* gtk/gtkiconview.c
	* gtk/gtkobject.c
	* gtk/gtkpaned.c
	* gtk/gtkpreview.c: don't include "gtksignal.h".

	* gtk/gtkfilefilter.c
	* gtk/gtkrecentchoosermenu.c
	* gtk/gtkrecentfilter.c
	* gtk/gtktext.c: don't include "gtkobject.h".

2008-03-04  Simos Xenitellis  <simos@gnome.org>

        Patch from http://bugzilla.gnome.org/show_bug.cgi?id=321896
	- Synch gdkkeysyms.h/gtkimcontextsimple.c with X.org 6.9/7.0
	
	* gdk/gdkkeysyms.h: Updated file from upstream (using script from 
	same directory).
	
	* gtk/gtkimcontextsimpleseqs.h (gtk_compose_seqs_compact[]): New 
	file, contains compose sequences that used to exist in 
	gtk/gtkimcontextsimple.c

	* gtk/compose-parse.py: Script to generate compose 
	sequences from upstream (Xorg).

	* gtk/gtkimcontextsimple.c (compare_seq_index, check_compact_table, 
	check_algorithmically): New functions. First two search in
	gtk_compose_seqs_compact[] for matching compose sequence, third
	tries NFC normalisation on incoming compose sequence.
	(gtk_im_context_simple_filter_keypress): 
	Adds searching with check_compact_table(), check_algorithmically().

2008-03-03  Carlos Garnacho  <carlos@imendio.com>

	Fix http://bugzilla.gnome.org/show_bug.cgi?id=417389 - Make the
	scrollwheel work in GtkPathBar.

	* gtk/gtkpathbar.h (struct _GtkPathBar): New field event_window.

	* gtk/gtkpathbar.c (gtk_path_bar_realize): New function.  Create
	an input-only window, event_window, which we'll use to capture
	scroll events.
	(gtk_path_bar_map): Show the event_window under the rest of the
	windows, so it will be a catch-all for unhandled events.

2008-03-03  Sven Neumann  <sven@gimp.org>

	* gtk/gtkfilechooserbutton.c (G_DEFINE_TYPE_WITH_CODE): fixed a
	typo in the documentation of the GtkFileChooserButtons::file-set
	signal (see bug #353196).

2008-03-03  Tor Lillqvist  <tml@novell.com>

	* gtk-zip.sh.in: Add gail bits. Simplify check for message catalog
	location.

2008-03-02  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkiconview.c (gtk_icon_view_paint_item): 
	Remove left-over focus_pad variable.
	(#490892, Claudio Saavedra)

	* docs/tutorial/gtk-tut.sgml: Remove an extra space and swap word order
	(#518166, Matt Kraai)

2008-03-02  Johan Dahlin  <johan@gnome.org>

	* docs/tutorial/gtk-tut.sgml: Add a missing space
	(#517954, Matt Kraai)

2008-03-03  Tor Lillqvist  <tml@novell.com>

	* modules/engines/ms-windows/msw_style.c (draw_box): Check that
	the widget is a GtkButton before casting.

2008-03-02  Johan Dahlin  <johan@gnome.org>

	* configure.in: Compare using = instead of ==, which is portable.
	(#490787, Thomas Klausner)

2008-03-02  Johan Dahlin  <johan@gnome.org>

	* tests/Makefile.am (noinst_PROGRAMS): Remove autotestkeywords, it's added later,
	fixes non-C++ build.
	(#496032, Nelson Benitez)

2008-02-29  Johan Dahlin  <johan@gnome.org>

	* demos/gtk-demo/demo.ui:
	* gtk/gtkbuilderparser.c:
	* gtk/gtkbuilderprivate.h:
	* gtk/gtkliststore.c:
	* tests/buildertest.c:
	Add translatable/context and comment attributes on
	<col> tags under a GtkListStore. Refactor parts of the
	translation api and make it available inside gtk+ itself.
	Update tests and example.
	Fixes a part of #518642

2008-02-29  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkbuilder.c:
	Add missing g_return_val_if_fail checks for public API.

	* gtk/gtkbuilderparser.c:
	* gtk/gtkbuilderprivate.h:
	Do not use g_error for a few more errors, instead set
	the GError sent in through add_from_file/add_from_string.
	* tests/buildertest.c:
	Add a couple of new parsing tests.
	(#519199, Pavel Syomin)

2008-02-29  Federico Mena Quintero  <federico@novell.com>

	* gtk/gtkfilesystemunix.c (gtk_file_system_unix_get_folder): When
	refreshing an existing folder (i.e. when we are about to reload
	its file list), turn off the folder's is_finished_loading flag.
	Otherwise callers which do ::is_finished_loading() followed by
	::list_children() will get nothing.

2008-02-29  Cody Russell  <bratsche@gnome.org>

	* docs/tutorial/gtk-tut.sgml: Fix tutorial documentation to
	say 'gtk_main_quit()' instead of 'gtk_quit()'. (#517908, Matt Kraai)

2008-02-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcalendar.h: Remove trailing comma from enum to
	make the compiler happy.  (#517295, Sylvain Pasche)

2008-02-27  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenushell.c
	* gtk/gtktable.c
	* gtk/gtktext.c
	* gtk/gtktipsquery.c
	* gtk/gtktoolbar.c
	* gtk/gtktreeitem.c
	* gtk/gtktreeview.c
	* gtk/gtkviewport.c
	* gtk/gtkwin32embedwidget.c: remove g_return_if_fail() from
	private functions and virtual function implementations.

2008-02-27  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzView.c:
	* gdk/quartz/GdkQuartzView.h:
	* gdk/quartz/gdkwindow-quartz.c: (gdk_window_set_decorations):
	Fix performance regression for borderless transparent windows
	with shadow.

2008-02-27  Emmanuele Bassi  <ebassi@gnome.org>

	* tests/testgtk.c: Revert back to r19454.

2008-02-27  Sven Neumann  <sven@gimp.org>

	* gtk/Makefile.am (GTK_PRINT_PREVIEW_COMMAND): when building the
	Quartz backend, use a native Mac OS X application for the print
	preview (bug #518624).

2008-02-26  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktextbufferserialize.c (parse_info_free): don't g_free()
	the members of info->tag_stack since they are a) gobjects and b)
	not even owned by us, ugh... Fixes crash when deserializing fails.

2008-02-26  Sven Neumann  <sven@gimp.org>

	* docs/tools/shooter.c (find_toplevel_window)
	* docs/tools/widgets.c (find_toplevel_window): fixed signedness of
	argument passed to XQueryTree().

2008-02-25  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtksearchenginebeagle.c: Look for libbeagle.so.1 and
	don't use beagle_query_add_hit_type.

2008-02-25  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c
	(_gdk_quartz_events_trigger_crossing_events): Fix build on tiger.

2008-02-24  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzWindow.c: Prevent hidden windows from being
	shown without gdk's control when clicking the dock icon.

2008-02-24  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkprivate-quartz.h:
	* gdk/quartz/gdkeventloop-quartz.c: (got_fd_activity), (poll_func):
	Use the subtype field for the custom event that is used to wake up
	the mainloop so we can have other custom event types.

	* gdk/quartz/gdkevents-quartz.c:
	(_gdk_quartz_events_trigger_crossing_events):
	* gdk/quartz/gdkwindow-quartz.c: (show_window_internal): Create
	crossing events after showing a window if necessary, to work
	around problems with the tracking rect API.

2008-02-22  Dominic Lachowicz  <domlachowicz@gmail.com>

	* demos/gtk-demo/printing.c (do_printing): gtk-demo printing gives 
	wrong results on win32 because it doesn't set the printing units, 
	which affect the transformation of the cairo context 
	(#347125, Erik van Pienbroek)

2008-02-22  Tor Lillqvist  <tml@novell.com>

	* tests/pixbuf-init.c: Add file missing from SVN, from the tarball.

2008-02-22  Dominic Lachowicz  <domlachowicz@gmail.com>

	* gdk-pixbuf/queryloaders.c (loader_sanity_check): It's perfectly
	acceptable for a module to only support the save_to_callback()
	method if it marks itself as WRITABLE

2008-02-16  Matthias Clasen  <mclasen@redhat.com>
	
	* configure.in: Bump version

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* === Released 2.13.0 ===

	* Makefile.decl: Start Xvfb at depth 16 so cairo doesn't choke.

2008-02-21  Tor Lillqvist  <tml@novell.com>

	* gtk/gtkfilechooserdefault.c (list_mtime_data_func) [Win32]: Must
	pass the format string to strftime in the C library's locale's
	charset, not the system's. Correspondingly, the return value from
	strftime() is in the C library's locale's charset. (#509885)

2008-02-20  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (gdk_window_set_decorations): Set
	the right window level and shadow after recreating the window.

	* gdk/quartz/GdkQuartzView.c: (drawRect): Invalidate the shadow if
	necessary after drawing (bug #517338).

2008-02-20  Marc-Andre Lureau  <marcandre.lureau@gmail.com>

	* gtk/gtkbuilder.c (_gtk_builder_enum_from_string): fix missing
	call to g_type_class_unref in case of error. (#517563)

2008-02-18  Sven Neumann  <sven@gimp.org>

	* gtk/Makefile.am (STOCK_ICONS)
	* gtk/stock-icons/16/gtk-page-setup.png
	* gtk/stock-icons/24/gtk-page-setup.png: added page-setup icons
	taken from GNOME icon theme.

	* gtk/gtkstock.[ch]: added GTK_STOCK_PAGE_SETUP. Closes bug #514410.

2008-02-18  Runa Bhattacharjee <runabh@gmail.com>

	* configure.in: Added Kannada (kn) to ALL_LINGUAS

2008-02-17  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert (GtkBuilderConverter._add_action_from_menuitem): 
	When converting a stock item based on the label, remove the label property.

2008-02-17  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzWindow.c: (showAndMakeKey): Update the
	position after showing the window since the window manager might
	not place it where we requested in the first places.

2008-02-17  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (show_window_internal),
	(_gdk_quartz_window_detach_from_parent),
	(_gdk_quartz_window_attach_to_parent), (gdk_window_focus): Clear
	the toplevel ordering list in all places where the order is
	potentially changed. Fixes mouse focus issues for windows with
	a transient parent set.

2008-02-17  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c
	(_gdk_quartz_events_update_mouse_window): Highlight the mouse
	window when event debugging is enabled.

2008-02-16  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c (create_scroll_event): Add state
	to the scroll event (bug #516757, Paul Davis).

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* NEWS: Updates

2008-02-16  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtklinkbutton.c: Show the URI in a tooltip.  (#505480,
	Teppo Turtiainen)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gdk/Makefile.am: Don't install private headers. (#463510)

	* gdk/gdkinternal.h: Include gdkmedialib.h here, not in
	the installed header gdkprivate.h.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtknotebook.c (gtk_notebook_stop_reorder): Prevent
	a crash with hidden, reorderable tabs.  (#513230, 
	Mike Massonnet, patch by Carlos Garnacho)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkuimanager.c (gtk_ui_manager_insert_action_group):
	Warn on duplicate action group names.  (#501746, Christian
	Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/Makefile.am:
	* modules/other/gail/tests/Makefile.am:
	* modules/other/gail/libgail-util/Makefile.am:
	* modules/other/gail/Makefile.am: Fix builddir!=srcdir
	builds.  (#516254,  Yevgen Muntyan)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkentry.c:
	* gtk/gtkfilesel.c:
	* gtk/gtklabel.c:
	* gtk/gtkpathbar.c: Use gtk_drag_*_add_{text,uri}_targets 
	instead of hardcoded target tables.  (#516092, Christian Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkselection.c (gtk_target_list_add_text_targets): Don't
	add the same target atom twice.  (#516087, Christian Persch)

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* tests/testfilechooser.c: Add a --backend option.
	(#516073, Christian Persch)

2008-02-16  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkprivate-quartz.h:
	* gdk/quartz/gdkwindow-quartz.c: Add debugging code to highlight a
	gdkwindow.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Go back to 2.13.0 as version for now,
	as there was no consensus to do the jump.

	* many other places: Update Since: tags.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtk.symbols: Add gtk_tool_shell_get_type

	* gtk/gtktestutils.c: Don't generate unnecessary PLT entries

2008-02-15  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzView.c: Adapt to the change to use frame
	instead of bounds when resizing windows.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gdk/x11/gdkkeys-x11.c:
	* gdk/x11/gdkcolor-x11.c:
	* gdk/gdkpolyreg-generic.c: Fix a small doc issues.

2008-02-15  Matthias Clasen <mclasen@redhat.com>

	* gdk/x11/gdktestutils-x11.c:
	* gdk/x11/gdkscreen-x11.c: Documentation fixes.

2008-02-15  Tor Lillqvist  <tml@novell.com>

	* gtk/gtkfilesystemwin32.c (get_viewable_logical_drives): Don't
	leak Registry key handles. (#516578)

2008-02-14  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (gdk_window_focus): Using
	makeKeyWindow unfortunately doesn't work in all cases, we must use
	makeKeyAndOrderFront.

2008-02-14  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (get_fullscreen_geometry),
	(gdk_window_hide), (gdk_window_fullscreen),
	(gdk_window_unfullscreen): Make sure we leave fullscreen mode if
	the window is hidden.

2008-02-14  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzWindow.c: Set frame, not bounds when
	resizing to be consistent and to avoid introducing an internal
	transform in the view.

2008-02-14  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkdisplay-quartz.c: (gdk_display_open): Coding style
	fix.

2008-02-14  Johan Dahlin  <johan@gnome.org>

	* gdk/gdktestutils.h
	* gtk/gtktestutils.h: Remove ; trailing G_BEGIN/END_DECLS

2008-02-13  Richard Hult  <richard@imendio.com>

	* gtk/gtkclipboard-quartz.c: (gtk_clipboard_wait_for_contents):
	Remove unused variables.
	(gtk_clipboard_set_contents),
	(gtk_clipboard_get_owner), (clipboard_unset),
	(gtk_clipboard_request_targets): Notify the previous clipboard
	owner when the owner changes. Fixes bug #493406.
	
2008-02-13  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkcolor-quartz.c: (gdk_colormap_alloc_colors): Fix
	the return value (return number of colors that failed), and handle
	RGBA colormap.
	(gdk_colormap_free_colors): Fix typo in comment.

2008-02-13  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_stop_rubber_band): only
	queue a redraw if the rubber banding has actually been active.

2008-02-12  Matthias Clasen  <mclasne@redhat.com>

	* gtk/gtkpapersize.c:
	* gtk/gtkprintoperation.c:
	* gtk/gtkvolumebutton.c:
	* gtk/gtkbulderparser.c: Fix some i18n errors. Pointed
	out by Behdad Esfahbod.

2008-02-12  Federico Mena Quintero  <federico@novell.com>

	Merged from gtk-2-12:

	Don't focus the file list when shortcuts get activated.  This
	removes a lot of ambiguity in when the file selection should
	change, and makes the overall code flow simpler.

	This fixes http://bugzilla.gnome.org/show_bug.cgi?id=419737 -
	file/save dialog clears the filename entry when changing
	directories.

	Also fixes http://bugzilla.gnome.org/show_bug.cgi?id=499940 -
	focus should not go to the file list when a shortcut is activated.

	* gtk/gtkfilechooserdefault.c
	(shortcuts_activate_volume_mount_cb): Don't focus the file list
	(shortcuts_activate_get_info_cb): Likewise.

	* gtk/gtkfilechooserdefault.c (switch_to_shortcut): Don't focus
	the file list (this was the last place where we would focus the
	file list explicitly).  If you are in the location entry, for
	example, you don't want Alt-Home to take you to the file list; you
	just want the current folder to change.  Thanks to Olle Bergkvist
	<olle.bergkvist@yahoo.se> for pointing this out in
	http://bugzilla.gnome.org/show_bug.cgi?id=419737#c51.
	(focus_browse_tree_view_if_possible): Removed.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	Skip exensions when selecting filenames in the save-as dialog.
	(#362516, Carlos Garnacho)

	* gtk/gtkfilechooserentry.h:
	* gtk/gtkfilechooserentry.c (_gtk_file_chooser_entry_select_filename):
	New function to skip the extension part when selecting a filename.
	(_gtk_file_chooser_entry_set_base_folder): Use it here.

	* gtk/gtkfilechooserdefault.c (gtk_file_chooser_entry_grab_focus):
	...and here.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkiconview.c: Fix state change reporting for 
	accessibility.  (#499835, Rich Burridge, patch by LiYan Zhang)

2008-02-12  Emmanuele Bassi  <ebassi@gnome.org>

	* gtk/gtkrecentchooser.c:
	(gtk_recent_chooser_class_init): Set the default value of the
	:show-not-found property to TRUE, as every implementation sets
	it to TRUE already.

	* gtk/gtkrecentchooserdefault.c:
	(_gtk_recent_chooser_default_init): Sync show_tips to the
	default value of the :show-tips property.

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkclipboard-quartz.c:
	* gtkquartz.c:
	* gtkselection.c: Use GSlice for GtkSelectionData.  (#515060,
	Christian Persch)

2008-02-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_real_select_cursor_row),
	(gtk_tree_view_real_toggle_cursor_row): guard against people
	deleting the row in question in the selection-changed callback.
	(#514621, Andreas Koehler).

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/*.c: Unify the handling of various "Enter" keysyms
	all over the place.  (#515047, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkfilesystemmodel.c:
	* gtk/gtkprinter.c:
	* gtk/gtkwidget.c: Use g_value_set_static_string() where 
	appropriate.  (#515042, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* tests/prop-editor.c: Fix a memory leak (#515039, Christian Persch)
	
2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* tests/testmerge.c: Fix a memory leak (#515038, Christian Persch)

2008-02-12  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkfilechooserdefault.c (recent_model_sort_drag_data_get):
	(recent_model_sort_drag_data_get):
	(search_model_sort_drag_data_get):
	* gtk/gtkfilesystemmodel.c (drag_source_drag_data_get):
	* gtk/gtkpathbar.c (button_drag_data_get_cb):
	Use gtk_selection_data_set_uris() instead of doing it
	by hand.  (#514890, Christian Persch)

2008-02-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkstatusicon.c: #include "gtkmain.h" for
	gtk_get_current_event_time().

2008-02-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwindow.c (gtk_window_activate_key): simply use
	gtk_window_get_key_hash() to get the hash instead of manually
	fiddling with quarks and gtk_window_keys_changed(). Also add
	g_return_if_fail() to this public function.

2008-02-11  Matthias Clasen  <mclasen@redhat.com>

	Support keynav in status icons.  (#473786, Li Yuan)

	* gtk/gtkstatusicon.c: Handle keynav, make the tray icon focusable.

	* gtk/gtktrayicon-x11.c: Draw a focus rectangle when focused.

2008-02-11  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellview.c (gtk_cell_view_cell_layout_reorder)
	* gtk/gtkiconview.c (gtk_icon_view_cell_layout_reorder): plug leak
	wrt. link deletion from list; contination of fix for #503569.

2008-02-11  Emmanuele Bassi  <ebassi@gnome.org>

	* gtk/gtkrecentchoosermenu.c:
	(gtk_recent_chooser_menu_constructor): Set no-show-all flag
	on the placeholder menu item.

	* tests/testrecentchoosermenu.c:
	(create_recent_chooser_menu): Use gtk_widget_show_all() to test
	whether the placeholder menu item gets shown.

2008-02-10  Cody Russell  <bratsche@gnome.org>

	* gtk/gtkfilechooser.c (gtk_file_chooser_get_current_folder_uri):
	Check the return value of _gtk_file_chooser_get_file_system () for
	NULL before passing it to gtk_file_system_path_to_uri ().
	(#515667, Francesco Montorsi)

2008-02-10  Philip Withnall  <pwithnall@svn.gnome.org>

	* gtk/gtkbuilder.c: Improve the documentation for
	gtk_builder_connect_signals. (#514471)

2008-02-10  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkrecentaction.c: Propagate local-only.  (#511987, 
	Jonh Wendell)

2008-02-08  Cody Russell  <bratsche@gnome.org>

	* gtk/gtkcombobox.c (gtk_combo_box_cell_layout_pack_start):
	Removed an extra semicolon.  (#515219, reported by Kazuki IWAMOTO)

2008-02-08  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c (gdk_event_translate): Ignore the
	delta from the NSEvent for now, generating multiple scroll events
	results in a lot of events getting queued up and things get really
	slow.

2008-02-08  Sven Herzberg  <sven@imendio.com>

	Adjust the code to match the documentation, examples, "common sense"
	and existing applications.

	* gtk/gtkaction.c: (_gtk_action_sync_menu_visible): take into account
	that a GtkMenu for a <popup> element doesn't have to have a GtkAction
	assigned

2008-02-07  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkevents-win32.c
	* gdk/win32/gdkwindow-win32.c: Fixed two declarations in the middle
	of a block that were causing compile problems on old
	compilers. (#515053, reported by Kazuki IWAMOTO)
	
2008-02-07  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcellview.c
	* gtk/gtklabel.c
	* gtk/gtklayout.c
	* gtk/gtklist.c
	* gtk/gtkmenu.c
	* gtk/gtkmenushell.c
	* gtk/gtkmisc.c
	* gtk/gtkoptionmenu.c
	* gtk/gtkplug.c
	* gtk/gtkpreview.c
	* gtk/gtkprogress.c
	* gtk/gtkradiomenuitem.c
	* gtk/gtkscale.c
	* gtk/gtkscrolledwindow.c
	* gtk/gtksocket.c: remove g_return_if_fail() from private
	functions and virtual function implementations.

2008-02-07  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkaction.c
	* gtk/gtkassistant.c
	* gtk/gtkbin.c
	* gtk/gtkbox.c
	* gtk/gtkcalendar.c
	* gtk/gtkcellrenderercombo.c
	* gtk/gtkcombobox.c
	* gtk/gtkcombo.c
	* gtk/gtkdrawingarea.c
	* gtk/gtkentrycompletion.c
	* gtk/gtkfixed.h
	* gtk/gtkgamma.c
	* gtk/gtkhpaned.c
	* gtk/gtkiconview.c
	* gtk/gtkitem.c
	* gtk/gtkitemfactory.c: remove g_return_if_fail() from private
	functions and virtual function implementations.

2008-02-07  Christian Persch  <chpe@gnome.org>

	* gdk/gdkpixbuf-render.c:
	(gdk_pixbuf_render_pixmap_and_mask_for_colormap): If the pixbuf has an
	alpha channel, use gdk_draw_rgb_32_image to draw it to the pixmap;
	otherwise there will be random pixel values in the semi-transparent
	area of the pixbuf within the mask. Bug #487865.

2008-02-06  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkevents-win32.c: Check if the window is a temp window,
	otherwise things get wonky when you click on a menu.  This fixes
	a regression caused in #505928.  Thanks to Tor for spotting this
	one!  (#514789)

2008-02-06  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcontainer.c
	* gtk/gtkexpander.c
	* gtk/gtkframe.c
	* gtk/gtklabel.c
	* gtk/gtkmain.c
	* gtk/gtkmenu.c
	* gtk/gtkmenuitem.c
	* gtk/gtkmenushell.c
	* gtk/gtknotebook.c
	* gtk/gtkseparatortoolitem.c
	* gtk/gtksocket.c
	* gtk/gtktextlayout.c
	* gtk/gtktoggletoolbutton.c
	* gtk/gtktoolbutton.c
	* gtk/gtktoolitem.c
	* gtk/gtktree.c
	* gtk/gtktreeitem.c: replace "foo && GTK_IS_FOO (foo)" by simply
	"GTK_IS_FOO (foo)".

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkprintsettings.c (gtk_print_settings_get_page_ranges):
	Allow to store half-open ranges.

2008-02-05  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkwindow-win32.c (_gdk_modal_current): Walk
	down the stack until we get to a window that is mapped.
	Otherwise hiding a window will cause all windows in the app
	to be blocked. (#514643)

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* gtk/updateiconcache.c: Ignore images in the toplevel theme
	directory, avoiding one source of invalid caches that has been
	spotted in the wild.

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* gtk/updateiconcache.c: Fix the previous commit to compile.

2008-02-05  Matthias Clasen  <mclasen@redhat.com>

	* gtk/updateiconcache.c: Install a printerr handler that
	prepends the program name, since gtk-update-icon-cache output
	often appears in the middle of other output, e.g. rpm update logs.

2008-02-05  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkprivate-win32.h
	* gdk/win32/gdkevents-win32.c
	* gdk/win32/gdkwindow-win32.c
	* gdk/win32/gdkwindow-win32.h
	* gdk/win32/gdkwin32.h:
	Modal window rework.  (#455627 and #511111)

2008-02-04  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_cell_layout_add_attribute):
	g_return_if_fail() if the cell is not part of the combo instead of
	crashing in the next line.

2008-02-01  Cody Russell  <cody@jhu.edu>

	* modules/engines/ms-windows/xp_theme.[ch]
	* modules/engines/ms-windows/xp_theme_defs.h
	* modules/engines/ms-windows/msw_rc_style.c
	* modules/engines/ms-windows/msw_theme_main.c
	* modules/engines/ms-windows/msw_style.c: Re-indented and generally
	attempted to stylize more like the rest of the gtk+ stack's code.

2008-02-01  Michael Natterer  <mitch@imendio.com>

	* tests/testgtk.c: initialize GdkColor structs to fix warning
	about uninitialized "pixel" member.

	* tests/testactions.c: connect the toolbar_style() callback so it
	does something useful and doesn't warn about being defined but not
	used.

2008-01-31  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkevents-win32.c:
	Refactored some of the window hiding/showing code from
	WM_ACTIVATE to WM_SIZE and WM_SYSCOMMAND.  Having this
	under WM_ACTIVATE was causing the application to go into
	a weird state when the user right-clicked on the taskbar
	entry of a window that was minimized.  (#505928)
	
2008-01-31  Cody Russell  <bratsche@gnome.org>

	* gtk/gtkpaned.c (gtk_paned_set_position):
	Change queue_resize() to queue_draw(), and add a check for
	child2 != NULL in case someone calls this before there is
	a child packed in there.  (#144269 again)

2008-01-31  Sven Neumann  <sven@gimp.org>

	* gdk/directfb/gdkimage-directfb.c (_gdk_directfb_copy_to_image):
	applied patch from Denis Oliver Kropp <dok@directfb.org>.

2008-01-31  Sven Neumann  <sven@gimp.org>

	* gdk/directfb/gdkdisplay-directfb.c
	* gdk/directfb/gdkdrawable-directfb.c
	* gdk/directfb/gdkprivate-directfb.h
	* gdk/directfb/gdkwindow-directfb.c: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Fixes remaining warnings.

2008-01-31  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzView.c: Another attempt at fixing focus
	issues with undecorated windows. Revert the change done on
	2008-01-25 and fix it by using the view's bounds instead. The
	bounds will always be up to date when setting up the tracking
	rect, so this should be more robust.

2008-01-30  Sven Neumann  <sven@gimp.org>

	* gdk/directfb/gdkdrawable-directfb.c
	* gdk/directfb/gdkwindow-directfb.c
	* gdk/directfb/gdkprivate-directfb.h: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Adds debug messages using
	DirectFB's debugging system

2008-01-30  Sven Neumann  <sven@gimp.org>

	* gdk/directfb/gdkdirectfb.h
	* gdk/directfb/gdkdisplay-directfb.c
	* gdk/directfb/gdkdrawable-directfb.c
	* gdk/directfb/gdkim-directfb.c
	* gdk/directfb/gdkimage-directfb.c
	* gdk/directfb/gdkinput-directfb.c
	* gdk/directfb/gdkmain-directfb.c
	* gdk/directfb/gdkpixmap-directfb.c
	* gdk/directfb/gdktestutils-directfb.c
	* gdk/directfb/gdkvisual-directfb.c
	* gdk/directfb/gdkwindow-directfb.c: applied patch from Denis
	Oliver Kropp <dok@directfb.org>. Fixes various warnings, some
	errors and has some cleanups.

2008-01-30  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkbuilderparser.c (parse_custom): use the right type for
	"subparser_data" and remove the (gpointer*) cast. Fixes bogus
	aliasing warning.

	* gtk/updateiconcache.c (add_string): cast const gchar* to
	gpointer when inserting in a GHashTable.

	* tests/testcalendar.c (calendar_detail_cb): remove const from
	return value since it's a newly allocated string.

	(calendar_update_details): free the detail.

2008-01-29  Johan Dahlin  <johan@gnome.org>

	* demos/gtk-demo/builder.c: (quit_activate), (about_activate),
	(do_builder):
	* demos/gtk-demo/demo.ui:
	Move the about dialog to the glade file, add accessible tags
	examples to the markup file.

2008-01-28  Paolo Borelli  <pborelli@katamail.com>

	* gtk/gtkprintunixdialog.c (draw_page_cb): do not leak the pango
	layout, fixes #512375.

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktextchild.c
	* gtk/gtktextview.c: meant to use G_STRFUNC, not G_STRLOC...

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* demos/gtk-demo/builder.c (about_activate): use
	gtk_about_dialog_set_program_name() instead of the deprecated
	set_name().

2008-01-28  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktextchild.c
	* gtk/gtktextview.c: use G_STRLOC instead of G_GNUC_FUNCTION (which
	is deprecated now).

2008-01-26  Johan Dahlin  <johan@gnome.org>

	* tests/Makefile.am:
	* tests/textbuffertest.c:
	Rename textbuffer test and port it to the new test framework
	
2008-01-25  Johan Dahlin  <johan@gnome.org>

	* gtk/gtktestutils.c (gtk_test_init): Restore accidentally removed
	unsetting of GTK_MODULES.

	* gtk/gtk-builder-convert
	(GtkBuilderConverter._convert_adjustment): Handle the case where
	there is no child text node.
	(GtkBuilderConverter): Allow xml comments in most places.

2008-01-25  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert
	(GtkBuilderConverter._convert_combobox_items): Remove the items
	even if there are no items set.
	(GtkBuilderConverter._add_action_from_menuitem): Convert toggled
	signals and tooltips for all menu items subclasses and 
	GtkImageMenuItem:label. 
	Makes it possible to fully convert and run Jokosher.glade.

2008-01-25  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkwidget.c: (gtk_widget_buildable_interface_init),
	(gtk_widget_buildable_get_internal_child), (free_action),
	(free_relation), (gtk_widget_buildable_parser_finished),
	(accessibility_start_element),
	(gtk_widget_buildable_custom_tag_start),
	(gtk_widget_buildable_custom_finished):
	Implement accessible support, fixes #454653.

	* gtk/gtk-builder-convert:
	Add support for migrating old glade files
	
	* tests/buildertest.c: (test_widget), (test_file):
	Add accessible tests and imprve the test_file function to display
	toplevels and run dialogs.

2008-01-25  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzView.c: Don't recreate a tracking rect if it
	didn't change, fixes focus event issues for undecorated windows.

2008-01-25  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: Fix compile warnings (add missing
	const and remove unused variables).

2008-01-25  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkbutton.h
	* gtk/gtkcellrenderer.h
	* gtk/gtkimcontext.h
	* gtk/gtkstyle.h
	* gtk/gtktoolbar.h
	* gtk/gtktooltip.h
	* gtk/gtktreeprivate.h
	* gtk/gtktreeviewcolumn.h
	* gtk/gtkwidget.h: add const to constant structs which are passed
	into GTK+. Also add some forgotten const for const strings.
	Fixes bug #511554.

	* gtk/gtkbutton.c
	* gtk/gtkcellrenderer.c
	* gtk/gtkimcontext.c
	* gtk/gtkstyle.c
	* gtk/gtktoolbar.c
	* gtk/gtktooltip.c
	* gtk/gtktreeview.c
	* gtk/gtktreeviewcolumn.c
	* gtk/gtkwidget.c: changed accordingly.

2008-01-25  Sven Herzberg  <sven@imendio.com>

	Reviewed by Johan Dahlin.

	* gtk/gtkuimanager.c (gtk_ui_manager_remove_ui): emit a warning if
	this is called with something that's not a GtkUIManager

2008-01-24  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkdialog.c (gtk_dialog_buildable_get_internal_child): 
	Chain up to parent, so widgets can have internal children.

2008-01-22  Mathias Hasselmann  <mathias@openismus.com>

	Add gdk_app_launch_context_get_type() to gdk.symbols (#511308, Kazuki
	IWAMOTO).

	* gdk/gdk.symbols: Add gdk_app_launch_context_get_type().

2008-01-22  Mathias Hasselmann  <mathias@openismus.com>

	Use pango_layout_set_height() for calendar details (#506049).

	* configure.in: Require 1.19.3 for pango_layout_set_height().
	* gtk/gtkcalendar.c: Use pango_layout_set_height() for details.

2008-01-18  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert (get_property_node): New method
	(GtkBuilderConverter._create_object): Conditionally take a node as
	a property value, so don't lose translate/context attributes if they
	are set. 
	(GtkBuilderConverter._add_action_from_menuitem): Send in Node as
	property values instead of strings.
	(#509153, Erik van Pienbroek)

2008-01-16  Mathias Hasselmann  <mathias@openismus.com>

	Change GtkCalendarDetailFunc to return newly allocated string. (#339540)

	* gtk/gtkcalendar.c: Release the memory returned by the detail_func.
	* gtk/gtkcalendar.h: Remove G_CONST_RETURN from GtkCalendarDetailFunc.
	* tests/testcalendar.c: Duplicate calendar details before returning.

2008-01-16  Christian Persch  <chpe@gnome.org>

	* gtk/gtkwidget.c: Store the event mask and extension event mode
	directly in the gobject data pointer, instead of in an allocated
	gint. Bug #506604.

2008-01-16  Michael Natterer  <mitch@imendio.com>

	* configure.in (GDK_PIXBUF_PACKAGES): add "gio-2.0" because
	gdk-pixbuf now uses gio functions.

2008-01-16  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcombobox.c (gtk_combo_box_set_model): Emit
	the notify::model signal.  (#509819, David Zeuthen)

2008-01-15  Michael Natterer  <mitch@imendio.com>

	* gdk/gdkdisplay.h
	* gdk/gdkdrawable.h
	* gdk/gdkevents.h
	* gdk/gdkpango.h
	* gdk/gdkregion.h
	* gdk/gdkrgb.h
	* gdk/gdkwindow.h: made more struct pointer and array parameters
	const. GDK should now be constified as far as possible without
	breaking source compatibility. Includes some minor cleanup like
	indentation and s/nfoo/n_foo/ (bug #508544).

	* gdk/gdkdisplay.c
	* gdk/gdkdraw.c
	* gdk/gdkevents.c
	* gdk/gdkpango.c
	* gdk/gdkregion-generic.c
	* gdk/gdkrgb.c
	* gdk/directfb/gdkdisplay-directfb.c
	* gdk/directfb/gdkwindow-directfb.c
	* gdk/quartz/gdkdisplay-quartz.c
	* gdk/quartz/gdkwindow-quartz.c
	* gdk/win32/gdkdisplay-win32.c
	* gdk/win32/gdkwindow-win32.c
	* gdk/x11/gdkdisplay-x11.c
	* gdk/x11/gdkwindow-x11.c: changed accordingly.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrc.c (_gtk_rc_style_unset_rc_property): add cast to fix
	const warning.

	(gtk_rc_parse_any): change variables to const and introduce
	another local variable to fix const warnings.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gdk/gdkscreen.c (gdk_screen_get_property): cast the return value
	of gdk_screen_get_font_options() to gpointer to get rid of const
	warning.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* tests/testdnd.c (source_drag_data_get): fix another call to
	gtk_selection_data_set().

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkoldeditable.c (gtk_old_editable_selection_received): fix
	signedness warning.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkiconcache.c (find_image_offset): remove unused variable.

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkfilesystemmodel.c (drag_source_drag_data_get): cast
	"uris" to guchar* when passing it to gtk_selection_data_set().

2008-01-14  Michael Natterer  <mitch@imendio.com>

	* gdk/gdk.h
	* gdk/gdkcairo.h
	* gdk/gdkcolor.h
	* gdk/gdkgc.h
	* gdk/gdkinternals.h
	* gdk/gdkregion.h
	* gdk/gdkwindow.h: made GdkRectangle*, GdkRegion* and GdkColor*
	parameters const (bug #508544).

	* gdk/gdkcairo.c
	* gdk/gdkgc.c
	* gdk/gdkwindow.c
	* gdk/gdkrectangle.c
	* gdk/gdkpolyreg-generic.c
	* gdk/gdkregion-generic.c
	* gdk/directfb/gdkcolor-directfb.c
	* gdk/directfb/gdkgc-directfb.c
	* gdk/directfb/gdkgeometry-directfb.c
	* gdk/directfb/gdkwindow-directfb.c
	* gdk/quartz/gdkcolor-quartz.c
	* gdk/quartz/gdkgc-quartz.c
	* gdk/quartz/gdkgeometry-quartz.c
	* gdk/quartz/gdkwindow-quartz.c
	* gdk/win32/gdkcolor-win32.c
	* gdk/win32/gdkgc-win32.c
	* gdk/win32/gdkgeometry-win32.c
	* gdk/win32/gdkprivate-win32.h
	* gdk/win32/gdkwindow-win32.c
	* gdk/x11/gdkcolor-x11.c
	* gdk/x11/gdkgc-x11.c
	* gdk/x11/gdkgeometry-x11.c
	* gdk/x11/gdkmain-x11.c
	* gdk/x11/gdkprivate-x11.h
	* gdk/x11/gdkwindow-x11.c: changed accordingly.

	* gdk/gdkpolyreg-generic.c: uncruftify to have proper function
	headers.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Explain name choice for gtk_tool_item_toolbar_reconfigured.

	* gtk/gtktoolitem.c: Add comment expaining name choice for
	gtk_tool_item_toolbar_reconfigured.

2008-01-14  Mathias Hasselmann  <mathias@openismus.com>

	Make _gtk_tool_item_toolbar_reconfigured public to allow GtkToolShell
	implementations to notify its children, when some aspect of their
	configuration changed (#509042).

	* gtk/gtk.symbols: Add gtk_tool_item_toolbar_reconfigured.
	* gtk/gtktoolbar.c, gtk/gtktoolitem.c, gtk/gtktoolitem.h:
	Rename _gtk_tool_item_toolbar_reconfigured.

2008-01-12  Mathias Hasselmann  <mathias@openismus.com>

	Include <gtk/gtktoolshell.h> from gtk.h.

	* gtk/gtk.h: Add gtktoolshell.h

2008-01-12  Mathias Hasselmann  <mathias@openismus.com>

	Print angle brackets arround e-mail addresses in the about dialog
	(#409520, Mariano Suárez-Alvarez).

	* gtk/gtkaboutdialog.c: Keep e-mail brackets in add_credits_page().

2008-01-11 13:28:02  Tim Janik  <timj@imendio.com>

	* gtk/gtktestutils.c (gtk_test_create_widget): removed old testutils
	special casing so test widgets are always queues for destruction
	during teardown.

	* gtk/tests/testing.c: removed bits left-over from testing without
	gtestutils.h.

2008-01-10  Tor Lillqvist  <tml@novell.com>

	* modules/other/gail/libgail-util/Makefile.am
	* modules/other/gail/tests/Makefile.am: Link with gtktargetlib and
	gdktargetlib.
	
2008-01-10  Tor Lillqvist  <tml@novell.com>

	* tests/Makefile.am: Build defaultvaluetest only on Unix as it
	uses gtkprintunixdialog API.

2008-01-10  Tor Lillqvist  <tml@novell.com>

	* gdk/win32/gdkdisplay-win32.c
	* gdk/win32/gdkglobals-win32.c
	* gdk/win32/gdkprivate-win32.h
	* gdk/win32/gdkscreen-win32.c
	* gdk/win32/gdkwindow-win32.c: Implement
	gdk_screen_get_monitor_width_mm(), gdk_screen_get_monitor_height_mm()
	and gdk_screen_get_monitor_plug_name(). Thanks to Kazuki
	Iwamoto. (#505753)

2008-01-10  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkwindow-win32.c: (gdk_window_set_transient_for),
	Properly ref/unref windows and parents.  (#506769)

2008-01-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (show_window_internal),
	(gdk_window_hide), (move_resize_window_internal): Move the
	tracking rect workaround from here...

	* gdk/quartz/GdkQuartzWindow.c:
	* gdk/quartz/GdkQuartzWindow.h: ...to here, and ignore window
	movements during showing/hiding operations. Fixes bug #508516.

2008-01-10  Michael Natterer  <mitch@imendio.com>

	* gdk/directfb/gdkscreen-directfb.c
	(gdk_screen_get_monitor_width_mm)
	(gdk_screen_get_monitor_height_mm)
	(gdk_screen_get_monitor_plug_name): add these functions to make
	it build again.

2008-01-10  Emmanuele Bassi  <ebassi@gnome.org>

	* gtk/gtkrecentchoosermenu.c:
	(idle_populate_func), (idle_populate_clean_up): Fix possible
	recursion by resetting the idle source id. (#507605, William
	Pitcock)

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_motion_draw_column_motion_arrow),
	(_gtk_tree_view_column_start_drag): fully initialize GdkWindowAttr to
	avoid valgrind warnings.  (#507751, patch from Christian Persch).

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c (gtk_tree_model_filter_get_path): Fix
	a leak of the path (#504611, patch from Sadrul Habib Chowdhury).

2008-01-10  Kristian Rietveld  <kris@imendio.com>

	Fix #477175, reported by Juri Pakaste.

	* gtk/gtktreeprivate.h:
	* gtk/gtktreeview.c (gtk_tree_view_top_row_to_dy): do not set
	tree_view->priv->dy here directly, just calculate the new value
	and set it on the adjustment,
	(gtk_tree_view_adjustment_changed): add guards to not call
	gtk_tree_view_dy_to_top_row() if we are currently in
	gtk_tree_view_top_row_to_dy(),
	(gtk_tree_view_put): fix coordinate annotation: these are bin_window
	coordinates, not tree coordinates,
	(gtk_tree_view_real_start_editing): add cast.

	* gtk/tests/treeview-scrolling.c: add an assertion for checking the
	position of the editable in the "create new row and start editing"
	tests.

2008-01-09  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcolorsel.c (make_label_spinbutton): remove unused
	variable.

	* gtk/gtkcombobox.c (gtk_combo_box_detacher)
	* gtk/gtkicontheme.c (theme_list_contexts)
	(gtk_icon_theme_lookup_icon)
	* gtk/gtkimcontextsimple.c (beep_window)
	* gtk/gtklinkbutton.c (set_link_color)
	* gtk/gtkuimanager.c (child_hierarchy_changed_cb): add casts to
	fix warnings.

	* gtk/gtkpathbar.c (_gtk_path_bar_set_file_system): remove unused
	variable and add const to another to fix a warning.

2008-01-07  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkassistant.c (remove_page): Be more robust when removing 
	the current page.  (#499951, Andreas Sandberg)

2008-01-06  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkspinbutton.c: Declare value in the example code for
	GtkSpinButton::output, as pointed out by Anders Carlsson.

2008-01-06  Christian Persch  <chpe@gnome.org>

	* gtk/gtkpagesetupunixdialog.c: Make the labels left-aligned,
	and remove an obsolete event box. Bug #506760.

2008-01-06  Johan Dahlin  <johan@gnome.org>

	* tests/buildertest.c (test_domain): 
	Update, GtkBuilder::translation-domain is no longer set
	
	* gtk/gtkbuilderparser.c (parse_interface): 
	Allow domains to be overridden in <interface>'s if a translation-domain
	is set in the builder.
	(_gtk_builder_parser_parse_buffer): Do not modify the translation-domain
	of the builder, make the domain set in the <interface> apply only to strings
	in that interface.
	(#496831, Ryan Lortie)

	* gtk/gtkbuilder.c: Avoid adding unnecessary trailing newlines 
	to g_warning calls.

	* gtk/gtktreestore.c (tree_model_end_element): 
	Remove an unused variable

2008-01-06  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkspinbutton.c: Document the ::output signal and
	add an example.  (#507566, example by Owen Taylor)

2008-01-06  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkcellrenderercombo.c:
	(gtk_cell_renderer_combo_get_property),
	(gtk_cell_renderer_combo_set_property):
	* gtk/gtkcombobox.c: (gtk_combo_box_set_property):
	* gtk/gtkcomboboxentry.c: (gtk_combo_box_entry_set_property):
	* gtk/gtknotebook.c: (gtk_notebook_set_property):
	* gtk/gtkspinbutton.c: (gtk_spin_button_set_property):
	* gtk/gtktextbuffer.c: (gtk_text_buffer_set_property),
	(gtk_text_buffer_get_property):
	* gtk/gtktextview.c: (gtk_text_view_set_property):
	* gtk/gtktogglebutton.c: (gtk_toggle_button_set_property):
	* gtk/gtktoolbutton.c: (gtk_tool_button_set_property),
	(gtk_tool_button_get_property):
	* gtk/gtktoolitem.c: (gtk_tool_item_set_property),
	(gtk_tool_item_get_property):
	* gtk/gtktreeview.c: (gtk_tree_view_set_property):
	* gtk/gtkwidget.c: (gtk_widget_set_property):
	* gtk/gtkwindow.c: (gtk_window_set_property):
	Use G_OBJECT_WARN_INVALID_PROPERTY_ID consistently.
	Fixes #507585

2008-01-06  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert (GtkBuilderConverter._strip_root): 
	Make sure that --root works for toplevel widgets.
	(#491847, Phil Lello)

2008-01-05  Johan Dahlin  <johan@gnome.org>

	* modules/other/gail/tests/Makefile.am: Include Makefile.decl,
	to make sure that make test-report works properly

2008-01-05  Christian Persch  <chpe@gnome.org>

        * tests/defaultvaluetest.c: Fix mem leak, and don't pass
        GType as integer through gpointer. Bug #507395.

2008-01-04  Mathias Hasselmann  <mathias@openismus.com>

	Avoid some compiler warnings (#507000).

	* gtk/gtkbuilder.c, gtk/gtkbuilderprivate.h: Use proper sign
	for value argument of _gtk_builder_flags_from_string.
	* gtk/gtkwidget.c: Don't alias the child pointer passed
	to gdk_window_get_user_data.

2008-01-04  Michael Natterer  <mitch@imendio.com>

	* gdk/x11/gdkinput-x11.c (_gdk_device_get_history): don't forget
	to set the time in the returned GdkTimeCoords.

2008-01-03  Emmanuele Bassi  <ebassi@gnome.org>

	* gtk/gtkfilechooserdefault.c (recent_sort_mru): Use the
	correct comparison function (kudos to Christian Persch and
	Claudio Saavedra for spotting this)

	* gtk/gtkrecentchooserutils.c:
	(sort_recent_items_mru),
	(sort_recent_items_lru): Ditto as above.

2008-01-03  Johan Dahlin  <johan@gnome.org>

	* tests/defaultvaluetest.c: Make it pass again.

2008-01-02  Johan Dahlin  <johan@gnome.org>

	* tests/defaultvaluetest.c (test_type): Ignore a few more tests to 
	make it pass on Ubuntu.
	(main): Use gtk_test_list_all_types () instead of providing our
	own list.
	And it no longer passes.

2007-12-30  Johannes Schmid <jhs@gnome.org>

	* gtk/gtknotebook.c: (gtk_notebook_stop_reorder):
	Also reorder menu when reordering tabs by drag & drop
	(Bug #506474)
	
	* tests/testnotebookdnd.c: (create_notebook_with_notebooks):
	Add a menu to one of the notebooks to have a test-case for
	the change mentioned above.

2007-12-31  Philip Van Hoof  <pvanhoof@gnome.org>

        * gtk/gtktreemodel.c: Using GSlice for GtkTreePath

2007-12-31  Christian Persch  <chpe@gnome.org>

	* gtk/gtkprintunixdialog.c: (gtk_print_unix_dialog_get_property):
	Plug a mem leak. Bug #506107.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkiconfactory.c (render_fallback_image): Adjust to
	icon cache api change.  (#506135, Kazuki Iwamoto)

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Consider "wide-separators" and "separator-height" style properties:
	The separator is drawn using gtk_paint_box instead of cairo, when
	"wide-separators" is set. Also do not highlight details for previous
	or next month, if their day matches the selected day. (#339540)

	* gtk/gtkcalendar.c: Consider "wide-separators" and "separator-height"
	in gtk_calendar_size_request and calendar_paint_day
	* gtk/gtkstyle.c: Modify gtk_default_draw_box to use special colors
	for selected detail separators in GtkCalendar.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Remove max_detail_height field from GtkCalendarPrivate. (#339540)

	* gtk/gtkcalendar.c: Drop max_detail_height field, and use
	a local variable instead in gtk_calendar_size_request.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* tests/defaultvaluetest.c: Add enough exclusions to make the
	test succeed.

2007-12-28  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/Makefile.am:
	* modules/other/gail/tests/*:
	* configure.in: Merge tests from standalone gail. Bug #504568.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkclipboard.c: Make the finalizer work when display is
	not set.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Draw bottom shadow of GtkCalender headings. (#506113)

	* gtk/gtkcalendar.c: Set proper initial height for priv->header_win.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcalendar.c: Document the initial values of year/month/day
	properties.

2007-12-28  Christian Persch  <chpe@gnome.org>

	* gtk/gtkfontsel.c: (gtk_font_selection_get_property): Plug
	a mem leak. Bug #506096.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktable.c:
	* gtk/gtktreeview.c:
	* gtk/gtkprintoperation.c:
	* gtk/gtkprogressbar.c:
	* gtk/gtkmessagedialog.c:
	* gtk/gtknotebook.c:
	* gtk/gtkprinter.c:
	* gtk/gtkfilesel.c:
	* gtk/gtklabel.c:
	* gtk/gtklinkbutton.c:
	* gtk/gtkmenu.c: More default property value corrections.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkitemfactory.c (gtk_item_factory_finalize): Don't unref
	accel_group unless it is set.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gdk/x11/gdkwindow-x11.c (get_default_title): Don't return NULL.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkhandlebox.c: Fix the default values of shadow and 
	shadow-type properties.

	* gtk/gtkfontsel.c: Fix the default values of several properties.

	* gtk/gtkfilesel.c: Fix the default value of the show-fileops
	property.

	* gtk/gtkcurve.c: Fix the default value of the curve-type property.

	* gtk/gtkcombo.c: Fix the default value of the enable-arrows-always
	property.

2007-12-28  Johan Dahlin  <johan@gnome.org>

	* gtk/gtkdialog.c (gtk_dialog_buildable_custom_finished)
	(gtk_dialog_buildable_custom_tag_start): Chain up. 
	This makes it possible to have accelerators tags on GtkDialog 
	subclasses.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Add GTK_CALENDAR_SHOW_DETAILS display flag, which chooses if details
	are shown within the widget, or just as tooltip. (#339540)

	* gtk/gtkcalendar.c, gtk/gtkcalendar.h: Add "show-details" property
	aka. GTK_CALENDAR_SHOW_DETAILS, and use it.
	* tests/testcalendar.c: Test GTK_CALENDAR_SHOW_DETAILS. Reduce padding
	in flags vbox.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Try more decent appearance of calendar details separator. (#339540)

	* gtk/gtkcalendar.c: Use different colors for drawing the separator,
	and make it short by one pixel on each side.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Apply trivial code-style changes from attachement 101101. (#339540)

	* tests/testcalendar.c: Some updates to current GTK+ code-style.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Restructure testcalendar for testing calendar details. (#339540)

	* tests/testcalendar.c: Push code arround for testing calendar details.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Implement GtkTooltip API for calendar details. (#339540)

	* gtk/gtkcalendar.c: Add gtk_calendar_query_tooltip and chain it up.
	Remember detail overflows in calendar_paint_day to show the tooltip
	only when neccessary.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Without setting "detail-width-chars" and "detail-height-rows"
	properties not only the widget has to be redrawn on certain
	conditions, but also its size must be recalculated. (#339540)

	* gtk/gtkcalendar.c: Add calendar_queue_refresh and call
	that function instead of gtk_widget_queue_draw.

2007-12-28  Mathias Hasselmann  <mathias@openismus.com>

	Consider details for size-request and expose-event. (#339540)

	* gtk/gtkcalendar.c: Add gtk_calendar_get_detail and
	is_color_attribute functions. Change gtk_calendar_size_request
	and calendar_paint_day to consider and show calender details.

2007-12-28  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcombobox.c: Introduce local priv variables to 
	reduce ->->

2007-12-27  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcombobox.c: Correct the default value for the 
	tearoff-title property.

	* gtk/gtkcellrenderertext.c: Fix the default value for the
	wrap-mode and font-scale properties.

	* gtk/gtkaspectratio.c: Fix the default value for the ratio
	property.

2007-12-27  Matthias Clasen  <mclasen@redhat.com>

	* gkt/gtksignal.h: Fix 0<>NULL confusion in gtk_signal_connect...
	defines.  (#505708,  MINAMI Hirokazu)

2007-12-27  Christian Persch  <chpe@gnome.org>
	
	* Makefile.am: Install gail.pc. Bug #505859.

2007-12-27  Mathias Hasselmann  <mathias@openismus.com>

	Add infrastructure for GtkCalendar details. (#339540)

	* gtk/gtkcalendar.c, gtk/gtkcalendar.h, gtk/gtk.symbols:
	Add "detail-width-chars" and "detail-height-rows" properties,
	and gtk_calendar_set_detail_func function.

2007-12-27  Xan Lopez  <xan@gnome.org>

	* gtk/gtk.symbols: 
	* gtk/gtkstyle.c (gtk_border_new, gtk_border_copy): 

	Add gtk_border_new to avoid memory allocator confusions when using
	GtkBorders. Also, make gtk_border_copy use g_slice_dup. (#454042)

2007-12-27  Christian Persch  <chpe@gnome.org>

	* gdk/x11/gdkscreen-x11.c: (init_randr12): Fir the patch from 
	bug #504886 not to read unitialised memory.

2007-12-26  Xan Lopez  <xan@gnome.org>

	* gtk/gtkstatusbar.c (has_extra_children): take into account the
	modification of the internal frame contents to decide if we have
	extra children. (#415677)

2007-12-22  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/gailitem.c: Fix mem leak. Bug #505556.

2007-12-25  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/gailwindow.c: (gail_window_initialize):
	Initialise |widget|. Fixes a buglet introduced by the commit from bug
	#505226.

2007-12-25  Christian Persch  <chpe@gnome.org>

        * modules/other/gail/*.h: Use G_BEGIN_DECLS/G_END_DECLS. Bug #505268.
	
2007-12-25  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/*.[ch]: Remove relocations from the atk
	factories. Remove unused gail_foo_new() functions. Fix object
	instantiation to be derivation safe by moving initialisation code
	from the removed gail_foo_new() functions to the
	AtkObjectClass::initialize implementation. Bug #505226.

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* modules/other/gail/gailentry.c:
	* modules/other/gail/gailimage.c:
	* modules/other/gail/gailtextview.c: Remove non-multihead-safe
	uses of clipboards and settings.  (#504722, Christian Persch)

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* gdk/gdkapplaunchcontext.c: Remove unneeded includes. (#505411,
	 Kazuki IWAMOTO)

2007-12-24  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcombobox.c: When popping up a menu from a treeview cell,
	use the time and button information from the event.  (#504901,
	Peter Bloomfield)

2007-12-23  Cody Russell  <bratsche@gnome.org>

	* gdk/win32/gdkevents-win32.c (show_window_recurse): Check that
	the window is mapped before setting SW_RESTORE or SW_MINIMIZE.
	Fixes a regression caused by #164537 patch where transient
	windows that are hidden get shown (incorrectly) when their
	parents are minimized. (#504984)
	
2007-12-22  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/gailcell.c:
	* modules/other/gail/gailcontainercell.c:
	* modules/other/gail/gailexpander.c:
	* modules/other/gail/gailtextcell.c:
	* modules/other/gail/gailtextview.c:
	* modules/other/gail/gailwindow.c: Fix compile warnings. Bug #504701.

2007-12-22  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/*.c: Include config.h. Bug #504720.

2007-12-22  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/*.c: Use G_DEFINE_TYPE[_WITH_CODE] instead of
	handwritten get_type functions. Bug #504661.

2007-12-23  Xan Lopez  <xan@gnome.org>

	* gtk/gtktreeview.c (gtk_tree_view_build_tree): pass correct argument
	to g_signal_emit for TEST_EXPAND_ROW (GtkTreeIter* vs. GtkTreeIter**).

	Patch by Sadrul Habib Chowdhury (#504804)

2007-12-22  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/Makefile.am: Link to gdk and gtk libs. Bug
	#504645, patch by Li Yuan.

2007-12-22  Christian Persch  <chpe@gnome.org>

	* gdk/x11/gdkscreen-x11.c: (init_randr12): Plug mem leaks. Bug #504886.

2007-12-22  Christian Persch  <chpe@gnome.org>
        
        * modules/other/gail/gail.c:
        * modules/other/gail/gailbutton.c:
        * modules/other/gail/gailcell.c:
        * modules/other/gail/gailcombo.c:
        * modules/other/gail/gailcombo.h:
        * modules/other/gail/gailcombobox.c:
        * modules/other/gail/gailentry.c:
        * modules/other/gail/gailexpander.c:
        * modules/other/gail/gailmenuitem.c:
        * modules/other/gail/gailnotebook.c:
        * modules/other/gail/gailnotebookpage.c:
        * modules/other/gail/gailnotebookpage.h:
        * modules/other/gail/gailoptionmenu.c:
        * modules/other/gail/gailrange.c:
        * modules/other/gail/gailtextview.c:
        * modules/other/gail/gailtreeview.c:
        * modules/other/gail/gailtreeview.h:
        * modules/other/gail/gailwindow.c: Use gdk_threads_add_idle.
        Bug #504571.

2007-12-22  Matthias Clasen  <mclasen@redhat.com>

	* modules/other/gail/gailclist.c: Chain up the finalizer (#504570,
	Christian Persch)

2007-12-21  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (_gdk_windowing_window_destroy):
	Plug leak of destroyed subviews, fixes bug #504753.

2007-12-20  Johan Dahlin  <johan@gnome.org>

	* tests/Makefile.am (TEST_PROGS): 
	* tests/defaultvaluetest.c: Add a test for default values,
	based on program by Christan Perch

2007-12-20  Johan Dahlin  <johan@gnome.org>

	* gtk/gtk-builder-convert (GtkBuilderConverter._remove_window): 
	Refactor to avoid some duplication.
	Convert toplevel GtkMenu's top popups and not menubars in the ui manager.
	Fixes #504749, Yuri Pimenov

2007-12-20  Kristian Rietveld  <kris@imendio.com>

	* configure.in: RYuri Pimenovemove leftovers from old XRandR check.  Makes
	the build work again on systems without xrandr 1.2.

2007-12-20  Christian Persch  <chpe@gnome.org>

	* configure.in:
	* modules/other/gail/libgail-util/Makefile.am:
	Keep the same libtool version as the standalone	libgail-util had.
        Bug #504643.

2007-12-20 15:30:09  Tim Janik  <timj@imendio.com>

	* Makefile.decl: generate HTML reports for test-report perf-report full-report.

2007-12-20  Alexander Larsson  <alexl@redhat.com>
        
	* gdk/x11/gdkapplaunchcontext-x11.c:
	Update for gio API changes

2007-12-20  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzWindow.c:
	* gdk/quartz/GdkQuartzWindow.h: Make manual resizing smoother by
	processing events after changing the size.

2007-12-20  Richard Hult  <richard@imendio.com>

	* modules/other/gail/gailwindow.c: (gail_window_get_mdi_zorder):
	Add stub for quartz to fix build.

2007-12-20  Christian Persch  <chpe@gnome.org>

	* modules/other/gail/Makefile.am:
	* modules/other/gail/gailimage.c: (gail_image_class_init),
	(gail_image_init), (elide_underscores), (gail_image_get_name),
	(atk_image_interface_init), (gail_image_finalize):
	* modules/other/gail/gailimage.h:
	R modules/other/gail/gailintl.h:
	* po/POTFILES.skip: Use the stock item's label as the name of the
	accessible in gailimage.c. Bug #504246.

2007-12-19  Mathias Hasselmann  <mathias@openismus.com>

	Avoid some compiler warnings and remove obsolete code. (#339540)

	* gtk/gtkcalendar.c: Change week and year variable in
	calendar_paint_week_numbers from gint to guint. Remove obsolete "#if
	0" block from calendar_paint_day: The feature in question is handled
	few lines above. Cast data returned by gtk_selection_data_get_text()
	to (gchar*) in gtk_calendar_drag_data_received.

2007-12-19 17:05:31  Tim Janik  <timj@imendio.com>

	* modules/other/Makefile.am: include Makefile.decl to unbreak test rules.

2007-12-19  Johan Dahlin  <johan@gnome.org>

	* tests/buildertest.c (test_object_properties): 
	Add another call to gtk_builder_add_string after using
	delayed properties, as reported in #504393 but already
	fixed in #495769.

2007-12-18  Christian Persch  <chpe@gnome.org>

	* configure.in:
	* docs/reference/Makefile.am:
	* docs/reference/libgail-util/*:
	* gail-uninstalled.pc.in:
	* gail.pc.in:
	* modules/Makefile.am:
	* modules/other/Makefile.am:
	* modules/other/gail/*:
	* modules/other/gail/libgail-util/*:
	* po/POTFILES.skip: Integrate gail into gtk+. Bug #169488.

2007-12-17  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtksettings.c: Add a gtk-im-module GTK setting
	* gdk/win32/gdkproperty-win32.c: 
	* gdk/x11/gdksettings.c: ...and back it by a Gtk/IMModule X setting.

	* gtk/gtkimmodule.[hc]: 
	* gtk/gtkimmulticontext.[hc]: When determining the default context,
	look at the gtk-im-module setting, and listen for changes to the
	setting.  (#502446, Akira Tagoh)

2007-12-17  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktooltip.c (gtk_tooltip_finalize),
	(gtk_tooltip_set_last_window): use a weak pointer to set last_window
	to NULL as soon as it's destroyed.  (#496546, patch from
	Benjamin Berg).

2007-12-17  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeviewcolumn.c (gtk_tree_view_column_update_button):
	always determine what arrow to show if show_sort_indicator is true.
	(#352738, Chris Vine).

2007-12-16  Mathias Hasselmann  <mathias@openismus.com>

	Prevent assertion failure in gtk_paned_find_neighbours. (#503824,
	Sébastien Granjoux)

	* gtk/gtkpaned.c: Call gtk_container_forall instead of
	gtk_container_foreach in get_child_panes.

2007-12-15  Xan Lopez  <xan.lopez@nokia.com>

	* gtk/gtktreeviewcolumn.c (gtk_tree_view_column_cell_layout_reorder):

	Plug leak: When reordering the info in the list the old node is
	removed but not freed. (#503569)

2007-12-15  Sebastian Dröge  <slomo@circular-chaos.org>

	* gdk/directfb/gdkcursor-directfb.c: (gdk_cursor_new_for_display):
	Use u32 instead of __u32 and u8 instead of __u8 as the other types
	are deprecated since DirectFB 1.0.0. If compiling with an older
	version define the new type name to the old types. Fixes bug #503190.

2007-12-14  Ray Strode  <rstrode@redhat.com>

	* gtk/gtkwidget.c: Suggest g_signal_connect (..., "realize", ...)
	instead of g_signal_connect_after (..., "realize", ...) as an
	alternative to gtk_widget_realize () (bug 503537).

2007-12-14  Michael Natterer  <mitch@imendio.com>

	* gdk/gdkinternals.h
	* gdk/gdkapplaunchcontext.h: #include <gio/gio.h> instead of
	individual files.

	* gdk/gdkapplaunchcontext.c
	* gdk/x11/gdkapplaunchcontext-x11.c: remove all gio includes, the
	header already includes everything now.

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Correct "Since:" tags for GtkPageSetup and GtkPrintSettings as
	next stable release shall be 2.16, not 2.14 - even if disagree.

	* gtk/gtkpagesetup.c, gtk/gtkprintsettings.c: s/2.14/2.16/

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Change GtkToolItem to retrieve its properties from GtkToolShell
	interface, instead of relying on being child of a GtkToolbar.
	(#5034079)

	* gtk/gtk.symbols, docs/reference/gtk/gtk-docs.sgml,
	docs/reference/gtk/gtk-sections.txt: Add GtkToolShell symbols.
	* docs/reference/gtk/tmpl/gtktoolitem.sgml: Move section docs inline.
	* gtk/gtktoolbar.c: Implement GtkToolShellIface.
	* gtk/gtktoolbar.h: Remove _gtk_toolbar_rebuild_menu.
	* gtk/gtktoolitem.c: Use GtkToolShell, instead of GtkToolbar.
	Take section docs from template file and update them for GtkToolShell.
	* gtk/Makefile.am: Add gtk/gtktoolshell.c and gtk/gtktoolshell.h.
	* gtk/gtktoolshell.c, gtk/gtktoolshell.h: New GtkToolShellIface.

2007-12-14  Mathias Hasselmann  <mathias@openismus.com>

	Extract loading of GtkPageSetup and GtkPrintSettings from their
	*_new_*() functions and move that code into separate
	*_load_*() functions (#475565).

	* gtk/gtk.symbols, gtk/gtkpagesetup.c, gtk/gtkpagesetup.h:
	Extract gtk_page_setup_load_file, gtk_page_setup_load_key_file,
	gtk_print_settings_load_file and gtk_print_settings_load_key_file.
	Change the matching *_new_*() functions to use those functions.

2007-12-14  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtk.symbols:
	* gtk/gtktooltip.[hc]: Add gtk_tooltip_set_icon_from_icon_name().

2007-12-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/tests/liststore.c:
	* gtk/tests/treestore.c: added tests for insertion functions.

Thu Dec 13 13:14:50 2007  Søren Sandmann  <sandmann@redhat.com>

	* Add RandR 1.2 support

	- New monitors_changed signal - New API to get width/height of
	  monitors, and the name of the plug

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* gtk/tests/liststore.c:
	* gtk/tests/treestore.c: test the move and swap functions on a
	store with only one node.

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktestutils.c (gtk_test_init): add a call to
	g_test_bug_base().

	* gtk/tests/treeview-scrolling.c: add g_test_bug() calls to
	appriopriate tests.

2007-12-13  Kristian Rietveld  <kris@imendio.com>

	* gtk/tests/liststore.c:
	* gtk/tests/treestore.c: start composing tests for the list and tree
	store.

	* gtk/tests/treeview-scrolling.c: added automated tests for
	GtkTreeView's scrolling "subsystem".

	* gtk/tests/Makefile.am: updated; added new test programs.

2007-12-13  Mathias Hasselmann  <mathias@openismus.com>

	Make the code compile again after the GdkAppLaunchContext changes.

	* configure.in: Add gio-2.0 to GDK_PACKAGES.
	* gdk/gdkinternals.h: Include <gio/gappinfo.h>.

2007-12-12  Matthias Clasen  <mclasen@redhat.com>

	* gdk/gdkapplaunchcontext.c: Add docs

2007-12-12  Matthias Clasen  <mclasen@redhat.com>

	* gdk/gdkapplaunchcontext.[hc]: Implement GAppLaunchContext 
	in gdk, providing startup notification.  (#503203)

	* gdk/x11/gdkapplaunchcontext-x11.c: 
	* gdk/win32/gdkapplaunchcontext-win32.c:
	* gdk/quartz/gdkapplaunchcontext-quartz.c: 
	* gdk/directfb/gdkapplaunchcontext-directfb.c: Backend-specific
	parts. All but X11 are just empty stubs for now.

	* gdk/gdk.symbols:
	* gdk/gdkinternals.h:
	* gdk/Makefile.am:
	* gdk/x11/Makefile.am: 
	* gdk/win32/Makefile.am: 
	* gdk/quartz/Makefile.am: 
	* gdk/directfb/Makefile.am: Necessary glue.

2007-12-12  Mathias Hasselmann  <mathias@openismus.com>

	* gtk/gtkdnd.c: Another attempt to improve gtk_drag_dest_set docs.

2007-12-11  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* gdk/directfb/gdktestutils-directfb.c:
	* gdk/directfb/Makefile.am: Applied a patch by Claudio Ciccani
	which adds testing functions to the DirectFB backend.

2007-12-11  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* gdk/directfb/gdkdrawable-directfb.c: Applied a patch by Claudio
	Ciccani	which fixes the mixing of gdk and cairo rendering.

2007-12-11  Mathias Hasselmann  <mathias@openismus.com>

	* gtk/gtkdnd.c, gtk/gtkwidget.c: Mention impact of GtkDestDefaults
	on "drag-motion" handlers. Clearify documentation for
	gtk_drag_dest_set.

2007-12-11 15:44:01  Tim Janik  <timj@imendio.com>

        * buildertest.c: made unnecessarily exported symbols static.
        switched g_return_if_fail() statements in tests to assertions.
        special cased currently failing Widget/accesibility test to
        run only for g_test_thorough(), so it doesn't break make check.
        some coding style fixes.

        * Makefile.am: added buildertest to TEST_PROGS.

2007-12-11  Stefan Kost  <ensonic@users.sf.net>

	* docs/tutorial/gtk-tut.sgml:
	  Use gtk_widget_get_parent_window() instead of widget->parent->window.

2007-12-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/Makefile.am:
	* gdk/quartz/gdkquartz.h:
	* gdk/quartz/gdkwindow-quartz.c: Install backend specific
	header (bug #405915). Also add a getter for the toplevel nswindow.

2007-12-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkdrawable-quartz.c:
	(gdk_quartz_drawable_get_context),
	(gdk_quartz_drawable_release_context):
	* gdk/quartz/gdkeventloop-quartz.c: (gdk_event_prepare),
	(gdk_event_check), (gdk_event_dispatch), (poll_func):
	* gdk/quartz/gdkwindow-quartz.h: Replace the autorelease pools
	used for each drawing context and in prepare, dispatch and poll
	with one that exists across each main loop iteration. Fixes leaks
	on leopard and protects against future leaks introduce when the
	underlying system changes again (bug #492977).

2007-12-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (move_resize_window_internal):
	Fix the check for no changes to position and size.

2007-12-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/GdkQuartzView.c: Ignore drawRect calls with zero
	sized areas at (0, 0), patch from Paul Davis.

2007-12-10  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkprivate-quartz.h: 
	* gdk/quartz/gdkeventloop-quartz.c:
	(_gdk_quartz_event_loop_get_pending),
	(_gdk_quartz_event_loop_check_pending),
	(_gdk_quartz_event_loop_release_event), (gdk_event_prepare),
	(gdk_event_check), (gdk_event_dispatch):
	* gdk/quartz/gdkevents-quartz.c: (gdk_events_pending)
	(_gdk_events_queue): Fix a bug where we could end up trying to
	handle the same event more than once. Based on patch from Paul
	Davis.

2007-12-10  Tor Lillqvist  <tml@novell.com>

	* gtk-zip.sh.in: Include bin/gtk-builder-convert in the dev
	package. (#502850)

2007-12-10  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtknotebook.c (gtk_notebook_real_remove): Another fix
	to avoid further fallout from the fix for bug 388321.

2007-12-09 09:56:06  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* gdk/directfb/gdkgc-directfb.c:
	* gdk/directfb/gdkdrawable-directfb.c:
	* gdk/directfb/gdkdirectfb.h:
	* gdk/directfb/gdkwindow-directfb.c:
	* gdk/directfb/gdkprivate-directfb.h: Committed several patches
	(window_flip_group, no_background_pixmap_fix, opt_temp_region2,
	blit_after_cairo_fix, rect_clip_fix, fast_blend, opt_temp_region_etc,
	opt_clip_region_and_fill_rects, no_state_resets) by Denis Oliver Knopp
	which are expected to improve the performance of the DirectFB backend.
	Experimental pieces of code (GDK_DIRECTFB_NO_EXPERIMENTS) are disabled.

2007-12-07  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcontainer.c: Correct the documentation of child
	property getter arguments.  (#501992, David Brigada)

2007-12-07  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkfilechooserdefault.c (shortcuts_reload_icons): Don't
	leak pixbufs.  (#502250, Yevgen Muntyan)

2007-12-07  Yevgen Muntyan  <muntyan@tamu.edu>

	* gtk/gtkprintunixdialog.c:
	* gtk/gtkpagesetupunixdialog.c: added alternative button order in
	Print and Page Setup dialogs (#502202).

2007-12-07 13:16:33  Tim Janik  <timj@imendio.com>

	* Makefile.decl: skip tests if gdktarget!=x11, since GUI tests need
	Xvfb. only start Xvfb if TEST_PROGS is not empty. moved "set -e" out
	of XVFB_START, since it's the GTESTER invokation that needs this.

2007-12-06  Tommi Komulainen  <tommi.komulainen@iki.fi>

	* gdk-pixbuf/gdk-pixbuf.symbols:
	* gdk/gdk.symbols:
	* gdk/gtk.symbols: Remove trailing whitespace that can trigger false
	positives in abicheck.sh

2007-12-06 18:45:06  Attilio Fiandrotti  <attilio.fiandrotti@gmail.com>

	* gdk/directfb/gdkevents-directfb.c: Committed a patch by DOK to fix
	GDK events generations in the DirectFB backend.

2007-12-06 13:55:06  Tim Janik  <timj@imendio.com>

	* Makefile.decl: replaced seq(1) invokation for X11 ids with a hardcoded
	set of likely unused display ids, because MacOS has no seq(1) command.

2007-12-06  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkevents-quartz.c:
	(synthesize_crossing_events_for_ns_event): Fix warning when
	switching spaces in leopard.

2007-12-06 13:38:36  Tim Janik  <timj@imendio.com>

	* tests/floatingtest.c: ported to new testing framework.

	* tests/Makefile.am: run floatingtest as testing framework test.

2007-12-06 10:44:52  Tim Janik  <timj@imendio.com>

	* tests/autotestfilechooser.c: majorly speed up execution by reducing
	timeouts and converting main loop sleeps to pending/iterate loops with
	very low priority async handlers. eliminate output for non-verbose
	tests. assert successfull subtests in all test functions. use testing
	framework in main().

	* tests/Makefile.am: add autotestfilechooser to TEST_PROGS, so it's
	executed inside Xvfb upon make check.

2007-12-06 08:23:38  Tim Janik  <timj@imendio.com>

	* tests/objecttests.c: use string comparisons for string property
	values and get rid of referencing symbols in array initialization.

2007-12-05 18:59:59  Tim Janik  <timj@imendio.com>

	* gtk+/Makefile.decl: run tests in current dir after setting up the
	logging directory, so their results get properly merged into the
	resulting test log.

	* gtk+/gtk/gtktestutils.[hc]: added gtk_test_list_all_types() for
	tests to loop over registered Gdk/Gtk+ types.

	* gtk+/tests/objecttests.c: new test program, implements automated
	property tests. several properties are blacklisted because they
	seem to trigger Gdk/Gtk+ bugs. ./objecttests -m thorough --verbose
	can be used to test blacklisted properties and see which proprty failed.

2007-12-04  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c: (_gdk_windowing_window_init):
	Fully initialize the root window, fixes bug #501583.

2007-12-04  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtknotebook.c: Modify the tab-label-destroy fix to not
	crash epiphany.

2007-12-03  Richard Hult  <richard@imendio.com>

	* gtk/gtkquartz.c: (_gtk_quartz_set_selection_data_for_pasteboard):
	Don't crash when dragging from a source that doesn't support uri
	lists (bug #499868, Paul Davis).

2007-12-03  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c:
	(gdk_window_impl_quartz_begin_paint_region): Don't crash when a
	parent relative bg pixmap is set, and no parent has a bg
	pixmap. Fixes bug #500804.

2007-12-03  Matthias Clasen  <mclasen@redhat.com>

	Two optimizations for icon cache lookups.

	* gtk/gtkiconcache.[hc]:
	* gtk/gtkicontheme.c: Remember the directory index for
	subdirectories, instead of running over the directory list
	again and again.

	* gtk/gtkiconcache.c (find_image_offset): Remember the last 
	chain and try it first; this helps with the the usage patterns
	in gtkicontheme.c, where the same icon is queried for a lot
	of subdirectories.

2007-12-03 15:18:17  Tim Janik  <timj@imendio.com>

	* gtk/Makefile.am (gtktypefuncs.c): use 'grep -o' to extract _get_type
	functions from header files. this should be portable across linux and
	Mac OS, unlike the previpous sed expression.

2007-12-1  Cody Russell  <bratsche@gnome.org>

	* gtk/gtkpaned.c: (gtk_paned_set_position) [Win32]:
	On Windows, queue a redraw of child2 whenever we set
	the pane handle position.  This is unfortunately kind
	of hacky, but solves the visual artifacts that were
	occuring on at least certain types of child widgets
	(e.g., text views and tree views) that are inside
	horizontal or vertical panes. (#144269)

2007-11-30  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkrc.c: Fix doc typos.  (#500672, David Lambert)

2007-11-29  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkmenuitem.c (gtk_menu_item_paint): Remove leftover
	debug spew.

2007-11-29  Matthias Clasen  <mclasen@redhat.com>

	* gtk/Makefile.am: Fix ordering of subdirs.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	A proper build of GNU libintl is supposed to export the variable
	_nl_msg_cat_cntr. configure looks for that variable in order to
	recognize GNU gettext. If it sees that it is indeed GNU gettext
	that is used, it decides to install message catalogs in
	share/locale, otherwise in lib/locale. Until now on Windows I have
	built GTK+ against a build of GNU gettext that did not export
	_nl_msg_cat_cntr. But this will change, so we can't assume message
	catalogs are always in lib/locale.

	* gtk/gtkmain.c: (_gtk_get_localedir) [Win32]: Rework to handle
	GTK_LOCALEDIR being either in "lib" or "share". Move the function
	before the inclusion of gtkprivate.h so that it sees the original
	GTK_LOCALEDIR.

	* gtk-zip.sh.in: Check whether the message catalogs are in
	share/locale or lib/locale.

	* config.h.win32.in: Tack on "/share/locale" to GTK_LOCALEDIR so
	that the code in _gtk_get_localedir() will find the slashes.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	* gtk/Makefile.am: Improve portability. The -o option is present
	only in newish GNU egreps. Use one more sed in the pipeline
	instead.

2007-11-28  Tor Lillqvist  <tml@novell.com>

	Fix #375893, patch by Ben Hague:

	* gtk/gtkfilesystemwin32.c (get_viewable_logical_drives): Wrapper
	around GetLogicalDrives() that takes also the viewable drive
	restrictions in the Registry (which are usually the result of an
	Active Directory Group Policy) into account.

	(check_volumes, gtk_file_system_win32_list_volumes) Call
	get_viewable_logical_drives() instead of GetLogicalDrives().

2007-11-27  Matthias Clasen <mclasen@redhat.com>

	* gtk/gtkwindow.c (gtk_window_move_resize): Zero some
	variables to silence valgrind.  (#495124, Morten Welinder)

2006-11-26  Ryan Lortie  <desrt@desrt.ca>

	* docs/reference/gtk/tmpl/gtkbuildable.sgml: add clarification stating
	that the construct_child function is responsible for returning a
	reference.
	* gtkbuilder.c (_gtk_builder_construct): remove g_object_ref() for
	objects from constructors
	* gtkuimanager.c (gtk_ui_manager_buildable_construct_child): add
	g_object_ref() to this construction function (it's the only
	implementer in GTK)

	Fixes #496645.

2006-11-26  Ryan Lortie  <desrt@desrt.ca>

	* gtkbuilder.c: remove concept of root objects and just refcount
	all objects in the builder.  Fixes #496651.

2007-11-26  Ryan Lortie  <desrt@desrt.ca>

	* tests/buildertest.c (test_window): fix invalid free

2007-11-26  Josselin Mouette <joss@malsain.org>

	reviewed by: Federico Mena Quintero

	* gtk/gtkfilechooserdefault.c: (shortcuts_append_paths),
	(shortcuts_add_bookmarks), (shortcuts_selection_changed_cb),
	(shortcuts_list_create), (gtk_file_chooser_default_should_respond):
	Make the shortcuts activate with a single click. (#148828)
        Fix a few things affected by the change:
	  - Set selection mode to GTK_SELECTION_SINGLE to allow a case 
	    where no shortcut is selected.
	  - Don't activate a shortcut in the response callback.
	  - Filter out duplicate entries in volumes and bookmarks to 
	    avoid the selection to change when reordering them with DnD.

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkmain.c:
	* gtk/gtknotebook.c:
	* gtk/gtkplugprivate.h:
	* gtk/gtksocket.c:
	* gtk/gtksocketprivate.h:
	* gtk/gtktable.c: Fix up some doc comments to shut up gtk-doc.

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Use $CUPS_CONFIG instead of hardcoded cups-config.
	(#495574, Richard Hult)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkprintunixdialog.c: Change some labels to be clearer.
	String change !   (#376361, Sven Neumann)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtknotebook.c (gtk_notebook_update_labels): Short-circuit on
	destroy.
	(gtk_notebook_destroy): Destroy tab_label widgets. (#388321, Morten
	Welinder)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkassistant.c: Improve alternative button
	ordering.  (#476827, Yevgen Muntyan, patch by Carlos Garnacho)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkcalendar.c: Fix a theming problem with colors
	in GtkCalendar.  (#499703, Michael Hofmann)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Bump glib requirement to 2.15.0 (for g_test_init)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	Use templates for glib-mkenums calls instead of 
	complicated commandlines in Makefiles.  (#429910)

	* gdk-pixbuf/Makefile.am:
	* gdk/Makefile.am: 
	* gtk/Makefile.am: 
	* perf/Makefile.am: Use templates for glib-mkenums

	* gdk-pixbuf/gdk-pixbuf-enum-types.[ch].template:
	* gdk/gdkenumtypes.[ch].template: 
	* gtk/gtktypebuiltings.[ch].template: 
	* perf/typebuiltins.[ch].template: The templates

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkfilechooserbutton.c:
	* gtk/gtktoolbar.c: Don't use guint8 for bitfields, since
	some compilers choke on that.  (#467722)

2007-11-26  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkaboutdialog.c (gtk_about_dialog_set_website): Add a note
	about hook setup.  (#425004, Emmanuele Bassi)

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* gdk/win32/gdkwindow-win32.c (gdk_window_fullscreen): Use the
	monitor the window currently is on, not always the primary
	monitor. (#463865, Tim Evans)

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* gdk/win32/gdktestutils-win32.c: New file, dummy implementations.

	* gdk/win32/Makefile.am: Add it.

2007-11-26  Tor Lillqvist  <tml@novell.com>

	* configure.in: Don't add jasper to all_loaders if no libjasper.

2007-11-25  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add detection for libjasper, used by the
	gdk-pixbuf JPEG2000 loader

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* configure.in: Require gtk-doc 1.8

	* */*.c: Use gtk-doc abbreviations for examples in docs.

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktreeview.c (gtk_tree_view_set_show_expanders): Fix a
	typo.  (#498922)

2007-11-25  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkdialog.c: Move signal and property documentation inline,
	fix a problem with the ::response signal docs.  (#499133, Josselin
	Mouette)

2007-11-22 15:48:26  Tim Janik  <timj@imendio.com>

        * Makefile.decl: initialize automake variables EXTRA_DIST and
	TEST_PROGS for unconditional appending via += in other makefiles.
	define recursive test targets: test, test-report, perf-report,
	full-report, as described here:
      http://mail.gnome.org/archives/gtk-devel-list/2007-November/msg00000.html
	the test targets will execute Gtk+ test programs within an Xvfb session.

        * gtk/gtktestutils.c: call g_test_init() from gtk_test_init().

        * gtk/tests/testing.c: use g_test_add_func() to register tests and use
	g_test_run() to run the tests to integrate with the testing framework.

        * gtk/tests/Makefile.am: removed exemplary testing rules.

        * Makefile.am, gtk/tests/Makefile.am, gtk/Makefile.am:
        * gtk/xdgmime/Makefile.am, gtk/theme-bits/Makefile.am:
        * tests/Makefile.am, docs/reference/gdk-pixbuf/Makefile.am:
        * docs/reference/gdk/Makefile.am, docs/reference/gtk/Makefile.am:
        * docs/reference/Makefile.am, docs/tools/Makefile.am:
        * docs/tutorial/Makefile.am, docs/faq/Makefile.am, docs/Makefile.am:
        * gdk-pixbuf/pixops/Makefile.am, gdk-pixbuf/Makefile.am:
        * demos/gtk-demo/Makefile.am, demos/Makefile.am:
        * modules/input/Makefile.am, modules/printbackends/file/Makefile.am:
        * modules/printbackends/test/Makefile.am, modules/printbackends/Makefile.am:
        * modules/printbackends/cups/Makefile.am, modules/printbackends/lpr/Makefile.am:
        * modules/engines/ms-windows/Theme/gtk-2.0/Makefile.am:
        * modules/engines/ms-windows/Theme/Makefile.am:
        * modules/engines/ms-windows/Makefile.am:
        * modules/engines/Makefile.am,  modules/engines/pixbuf/Makefile.am:
        * modules/Makefile.am, m4macros/Makefile.am, perf/Makefile.am:
        * contrib/Makefile.am, contrib/gdk-pixbuf-xlib/Makefile.am:
        * gdk/directfb/Makefile.am, gdk/linux-fb/Makefile.am:
        * gdk/quartz/Makefile.am, gdk/win32/rc/Makefile.am:
        * gdk/win32/Makefile.am, gdk/x11/Makefile.am, gdk/Makefile.am:
	include $(top_srcdir)/Makefile.decl, adapted EXTRA_DIST assignments.

2007-11-22  Matthias Clasen  <mclasen@redhat.com>

	* modules/printbackends/cups/gtkcupsutils.c: Fix a casting problem.
	(#485662, patch by Herbert Valerio Riedel)

2007-11-22  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktextiter.c: Fix an aliasing problem.  (#347585, Ed Catmur)

2007-11-21  Richard Hult  <richard@imendio.com>

	* gdk/quartz/Makefile.am: * gdk/quartz/gdktestutils-quartz.c: Add
	stubs for the testing functions to fix the build.

2007-11-21  Behdad Esfahbod  <behdad@gnome.org>

	* tests/testrichtext.c (setup_buffer): Fix C89 compilation issue.
	(#467711, The Written Word)

2007-11-21  Ross Burton  <ross@openedhand.com>

	* gdk/x11/gdksettings.c:
	Add xsetting for gtk-scrolled-window-placement (#458103).

2007-11-21  Behdad Esfahbod  <behdad@gnome.org>

	* gtk/gtkmenuitem.c (gtk_menu_item_class_init),
	(gtk_menu_item_paint): Make GtkMenuItem's arrow size themeable.
	(#469239, Michael Natterer)

2007-11-21  Behdad Esfahbod  <behdad@gnome.org>

	* gdk/x11/gdksettings.c (gdk_settings_names, gdk_settings_map): Add
	Gtk/EnableAccels and Gtk/EnableMnemonics xsettings for
	gtk-enable-accels and gtk-enable-mnemonics GtkSettings respectively.
	(#436536, Tommi Komulainen)

2007-11-21  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktoolbar.c: Fix the default value of the toolbar-style
	property.  (#489782, Jan Janech)

2007-11-20  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtkimage.c (animation_timeout): Avoid drawing one too many
	frames.  (#107398, Owen Taylor, Miguel Gomez)

Tue Nov 20 15:19:42 2007 +0100 Tim Janik

	Moved Gdk test functions from Gtk+ to Gdk test utils.

	* gdk/Makefile.am: added gdktestutils.h to public includes.

	* gdk/gdk.h: added gdktestutils.h to public includes.

	* gdk/gdk.symbols: added gdk_test_simulate_button,
	gdk_test_simulate_key, gdk_test_render_sync.

	* gdk/gdktestutils.h: new file, added prototypes for
	gdk_test_simulate_button, gdk_test_simulate_key, gdk_test_render_sync.

	* gdk/x11/Makefile.am: build gdktestutils-x11.c.

	* gdk/x11/gdktestutils-x11.c: implemented gdk_test_simulate_button,
	gdk_test_simulate_key, gdk_test_render_sync.

	* gtk/gtktestutils.c:
	* gtk/gtktestutils.h:
	* gtk/gtk.symbols: removed gtk_test_simulate_button
	gtk_test_simulate_key, gtk_test_xserver_render_sync.

	* gtk/tests/testing.c: call gdk_test_render_sync.

Thu Nov 15 13:11:39 2007 +0100 Tim Janik

	Added unit tests for Gtk+ testing utilities.

	* gtk/tests/testing.c: added a sample test program that tests Gtk+ test
	utility functions. some g_test_* related portions are disabled and need
	to be enabled once Gtk+ depends on a new glib with the GLib testing
	framework integrated.

	* gtk/tests/Makefile.am: new subdirectory to include quick Gtk+
	tests.  added exemplary test rules to run tests inside Xvfb. this
	needs to depend on gtester for full fledged testing.

	* gtk/Makefile.am: build gtk+/gtk/tests, define
	-DGTK_ENABLE_BROKEN when collecting _get_type functions to catch
	e.g. gtk_text_get_type().

	* configure.in: create gtk/tests/Makefile.in and gtk/tests/Makefile.

Thu Nov 15 11:55:34 2007 +0100 Tim Janik

	Added Gtk+ testing utilities.

	* gtk/gtktestutils.h, gtk/gtktestutils.c: added unit test utility
	functions.  for the most part, the functions herein involve
	navigating and interacting with dialog elements programatically,
	to automate user interaction tests of dialogs and widgets.

	* gtk/gtk.h: include gtk/gtktestutils.h as public API.

	* gtk/gtk.symbols: added gtk_test_* symbols.

	* gtk/Makefile.am: include gtktestutils.h and gtktestutils.c into
	the build.  generate gtktypefuncs.c which contains a list of all
	_get_type functions in Gtk+ and Gdk.

2007-11-20  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add support for conditional icns gdk-pixbuf loader
	(Closes: #395738)

2007-11-19 10:31:26  Tim Janik  <timj@imendio.com>

	* configure.in: updated version number to 2.15.0 for development.

2007-11-19 10:27:39  Tim Janik  <timj@imendio.com>

	=== Branch for 2.12 ===

